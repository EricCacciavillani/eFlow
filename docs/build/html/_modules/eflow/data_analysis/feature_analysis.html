

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>eflow.data_analysis.feature_analysis &mdash; eflow  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> eflow
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../_autosummary/eflow.auto_modeler.auto_cluster.html">AutoCluster</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../_autosummary/eflow.data_analysis.feature_analysis.html">FeatureAnalysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../_autosummary/eflow.data_analysis.null_analysis.html">NullAnalysis</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../_autosummary/eflow.data_pipeline_segments.data_encoder.html">DataEncoder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../_autosummary/eflow.data_pipeline_segments.feature_data_cleaner.html">FeatureDataCleaner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../_autosummary/eflow.data_pipeline_segments.feature_transformer.html">FeatureTransformer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../_autosummary/eflow.data_pipeline_segments.string_cleaner.html">StringCleaner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../_autosummary/eflow.data_pipeline_segments.type_fixer.html">TypeFixer</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../_autosummary/eflow.model_analysis.classification_analysis.html">ClassificationAnalysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../_autosummary/eflow.model_analysis.regression_analysis.html">RegressionAnalysis</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">eflow</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>eflow.data_analysis.feature_analysis</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for eflow.data_analysis.feature_analysis</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">eflow._hidden.parent_objects</span> <span class="kn">import</span> <span class="n">FileOutput</span>
<span class="kn">from</span> <span class="nn">eflow._hidden.general_objects</span> <span class="kn">import</span> <span class="n">DataFrameSnapshot</span>
<span class="kn">from</span> <span class="nn">eflow.utils.pandas_utils</span> <span class="kn">import</span> <span class="n">descr_table</span><span class="p">,</span><span class="n">value_counts_table</span>
<span class="kn">from</span> <span class="nn">eflow._hidden.custom_exceptions</span> <span class="kn">import</span> <span class="n">UnsatisfiedRequirments</span><span class="p">,</span> <span class="n">SnapshotMismatchError</span>
<span class="kn">from</span> <span class="nn">eflow._hidden.constants</span> <span class="kn">import</span> <span class="n">GRAPH_DEFAULTS</span>
<span class="kn">from</span> <span class="nn">eflow._hidden.parent_objects</span> <span class="kn">import</span> <span class="n">DataAnalysis</span>
<span class="kn">from</span> <span class="nn">eflow.utils.pandas_utils</span> <span class="kn">import</span> <span class="n">check_if_feature_exists</span><span class="p">,</span> <span class="n">generate_meta_data</span><span class="p">,</span> <span class="n">generate_entropy_table</span><span class="p">,</span> <span class="n">feature_correlation_table</span><span class="p">,</span> <span class="n">average_feature_correlation_table</span>
<span class="kn">from</span> <span class="nn">eflow.utils.sys_utils</span> <span class="kn">import</span> <span class="n">dict_to_json_file</span><span class="p">,</span> <span class="n">pickle_object_to_file</span><span class="p">,</span> <span class="n">create_dir_structure</span>

<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
<span class="kn">from</span> <span class="nn">eflow.utils.pandas_utils</span> <span class="kn">import</span> <span class="n">df_auto_binning</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Eric Cacciavillani&quot;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;Copyright 2019, eFlow&quot;</span>
<span class="n">__credits__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Eric Cacciavillani&quot;</span><span class="p">]</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s2">&quot;MIT&quot;</span>
<span class="n">__maintainer__</span> <span class="o">=</span> <span class="s2">&quot;EricCacciavillani&quot;</span>
<span class="n">__email__</span> <span class="o">=</span> <span class="s2">&quot;eric.cacciavillani@gmail.com&quot;</span>


<div class="viewcode-block" id="FeatureAnalysis"><a class="viewcode-back" href="../../../_autosummary_old/eflow.data_analysis.feature_analysis.html#eflow.data_analysis.feature_analysis.FeatureAnalysis">[docs]</a><span class="k">class</span> <span class="nc">FeatureAnalysis</span><span class="p">(</span><span class="n">DataAnalysis</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Analyzes the feature data of a pandas Dataframe object.</span>
<span class="sd">        (Ignores null data for displaying data and creates 2d graphics with 2 features.</span>
<span class="sd">        In the future I might add 3d graphics with 3 features.)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">df_features</span><span class="p">,</span>
                 <span class="n">project_sub_dir</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                 <span class="n">dataset_name</span><span class="o">=</span><span class="s2">&quot;Feature Analysis&quot;</span><span class="p">,</span>
                 <span class="n">overwrite_full_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">notebook_mode</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>

<span class="sd">            df_features: DataFrameTypes object from eflow.</span>
<span class="sd">                DataFrameTypes object.</span>

<span class="sd">            project_sub_dir: string</span>
<span class="sd">                Appends to the absolute directory of the output folder</span>

<span class="sd">            dataset_name: string</span>
<span class="sd">                Creates a parent or &quot;project&quot; folder in which all sub-directories</span>
<span class="sd">                will be inner nested.</span>

<span class="sd">            overwrite_full_path: string, None</span>
<span class="sd">                Overwrites the path to the parent folder.</span>

<span class="sd">            notebook_mode: bool</span>
<span class="sd">                If in a python notebook display visualizations in the notebook.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">DataAnalysis</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                              <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{project_sub_dir}</span><span class="s1">/</span><span class="si">{dataset_name}</span><span class="s1">&#39;</span><span class="p">,</span>
                              <span class="n">overwrite_full_path</span><span class="p">)</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">df_features</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__notebook_mode</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">notebook_mode</span><span class="p">)</span>

        <span class="c1"># Determines if the perform was called to see if we need to re-check</span>
        <span class="c1"># the dataframe.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="FeatureAnalysis.perform_analysis"><a class="viewcode-back" href="../../../_autosummary_old/eflow.data_analysis.feature_analysis.html#eflow.data_analysis.feature_analysis.FeatureAnalysis.perform_analysis">[docs]</a>    <span class="k">def</span> <span class="nf">perform_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">df</span><span class="p">,</span>
                         <span class="n">dataset_name</span><span class="p">,</span>
                         <span class="n">target_features</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">display_visuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">display_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">save_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">figsize</span><span class="o">=</span><span class="n">GRAPH_DEFAULTS</span><span class="o">.</span><span class="n">FIGSIZE</span><span class="p">,</span>
                         <span class="n">aggregate_target_feature</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">selected_features</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">extra_tables</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">statistical_analysis_on_aggregates</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Performs all public methods that generate visualizations/insights</span>
<span class="sd">            about the data.</span>

<span class="sd">        Note:</span>
<span class="sd">            Pretty much my personal lazy button for running the entire object</span>
<span class="sd">            without specifying any method in particular.</span>

<span class="sd">        Args:</span>
<span class="sd">            df: pd.Dataframe</span>
<span class="sd">                Pandas dataframe object</span>

<span class="sd">            dataset_name: string</span>
<span class="sd">                The dataset&#39;s name; this will create a sub-directory in which your</span>
<span class="sd">                generated graph will be inner-nested in.</span>

<span class="sd">            target_features: collection of strings or None</span>
<span class="sd">                A feature name that both exists in the init df_features</span>
<span class="sd">                and the passed dataframe.</span>

<span class="sd">                Note</span>
<span class="sd">                    If init to &#39;None&#39; then df_features will try to extract out</span>
<span class="sd">                    the target feature.</span>

<span class="sd">            display_visuals: bool</span>
<span class="sd">                Boolean value to whether or not to display visualizations.</span>

<span class="sd">            display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">            save_file: bool</span>
<span class="sd">                Boolean value to whether or not to save the file.</span>

<span class="sd">            dataframe_snapshot: bool</span>
<span class="sd">                Boolean value to determine whether or not generate and compare a</span>
<span class="sd">                snapshot of the dataframe in the dataset&#39;s directory structure.</span>
<span class="sd">                Helps ensure that data generated in that directory is correctly</span>
<span class="sd">                associated to a dataframe.</span>

<span class="sd">            suppress_runtime_errors: bool</span>
<span class="sd">                If set to true; when generating any graphs will suppress any runtime</span>
<span class="sd">                errors so the program can keep running.</span>

<span class="sd">            extra_tables: bool</span>
<span class="sd">                When handling two types of features if set to true this will</span>
<span class="sd">                    generate any extra tables that might be helpful.</span>
<span class="sd">                    Note -</span>
<span class="sd">                        These graphics may create duplicates if you already applied</span>
<span class="sd">                        an aggregation in &#39;perform_analysis&#39;</span>

<span class="sd">            aggregate_target_feature: bool</span>
<span class="sd">                Aggregate the data of the target feature if the data is</span>
<span class="sd">                non-continuous data.</span>

<span class="sd">                Note</span>
<span class="sd">                    In the future I will have this also working with continuous</span>
<span class="sd">                    data.</span>

<span class="sd">            selected_features: collection object of features</span>
<span class="sd">                Will only focus on these selected feature&#39;s and will ignore</span>
<span class="sd">                the other given features.</span>

<span class="sd">            statistical_analysis_on_aggregates: bool</span>
<span class="sd">                If set to true then the function &#39;statistical_analysis_on_aggregates&#39;</span>
<span class="sd">                will run; which aggregates the data of the target feature either</span>
<span class="sd">                by discrete values or by binning/labeling continuous data.</span>

<span class="sd">        Raises:</span>
<span class="sd">            If an empty dataframe is passed to this function or if the same</span>
<span class="sd">            dataframe is passed to it raise error.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="c1"># Raise empty dataframe error</span>
            <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
               <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span><span class="s2">&quot;Dataframe must contain valid data and &quot;</span>
                                            <span class="s2">&quot;not be empty or filled with nulls!&quot;</span><span class="p">)</span>

            <span class="c1"># Compare dataframe json file&#39;s snapshot to the given dataframe&#39;s</span>
            <span class="c1"># snapshot</span>
            <span class="k">if</span> <span class="n">dataframe_snapshot</span><span class="p">:</span>
               <span class="n">df_snapshot</span> <span class="o">=</span> <span class="n">DataFrameSnapshot</span><span class="p">()</span>
               <span class="n">df_snapshot</span><span class="o">.</span><span class="n">check_create_snapshot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                                 <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                                                 <span class="n">directory_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span><span class="p">,</span>
                                                 <span class="n">sub_dir</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">/_Extras&quot;</span><span class="p">)</span>

            <span class="n">generate_meta_data</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                               <span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span><span class="p">,</span>
                               <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;/_Extras&quot;</span><span class="p">)</span>

            <span class="n">generate_entropy_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                   <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                                   <span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span><span class="p">,</span>
                                   <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;/_Extras/Statistics&quot;</span><span class="p">)</span>

            <span class="n">corr_df</span> <span class="o">=</span> <span class="n">feature_correlation_table</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_table_as_plot</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">table</span><span class="o">=</span><span class="n">corr_df</span><span class="p">,</span>
                                    <span class="n">show_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                    <span class="n">format_float_pos</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
                                    <span class="n">df_features</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                                    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;Correlation Table&quot;</span><span class="p">,</span>
                                    <span class="n">sub_dir</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;/_Extras/Statistics&quot;</span><span class="p">,</span>
                                    <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                    <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                    <span class="n">meta_data</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


            <span class="n">corr_df</span> <span class="o">=</span> <span class="n">average_feature_correlation_table</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_table_as_plot</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">table</span><span class="o">=</span><span class="n">corr_df</span><span class="p">,</span>
                                    <span class="n">show_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                    <span class="n">format_float_pos</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
                                    <span class="n">df_features</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                                    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;Average Correlation Table&quot;</span><span class="p">,</span>
                                    <span class="n">sub_dir</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;/_Extras/Statistics&quot;</span><span class="p">,</span>
                                    <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                    <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                    <span class="n">meta_data</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Init color ranking fo plot</span>
            <span class="c1"># Ref: http://tinyurl.com/ydgjtmty</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
            <span class="n">pal</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;GnBu_d&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">corr_df</span><span class="p">[</span><span class="s2">&quot;Average Correlations&quot;</span><span class="p">]))</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">corr_df</span><span class="p">[</span><span class="s2">&quot;Average Correlations&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">argsort</span><span class="p">()</span><span class="o">.</span><span class="n">argsort</span><span class="p">()</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">corr_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">x</span><span class="o">=</span><span class="n">corr_df</span><span class="p">[</span><span class="s2">&quot;Average Correlations&quot;</span><span class="p">],</span>
                             <span class="n">palette</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pal</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])[</span><span class="n">rank</span><span class="p">])</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Features&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Correlation Average&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Average Feature Correlation&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">save_plot</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
                           <span class="n">df_features</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                           <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;Average Correlation Rank Graph&quot;</span><span class="p">,</span>
                           <span class="n">sub_dir</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;/_Extras/Statistics&quot;</span><span class="p">,</span>
                           <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                           <span class="n">meta_data</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">)</span>

            <span class="k">del</span> <span class="n">corr_df</span>

            <span class="c1"># Set to true to represent the function call was made with perform</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target_features</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
                <span class="n">target_features</span> <span class="o">=</span> <span class="p">{</span><span class="n">target_features</span><span class="p">}</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">target_features</span><span class="p">:</span>
                <span class="n">target_features</span> <span class="o">=</span> <span class="p">{</span><span class="kc">None</span><span class="p">}</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target_features</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
                <span class="n">target_features</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">target_features</span><span class="p">)</span>

            <span class="c1"># Iterate through all target features</span>
            <span class="k">for</span> <span class="n">target_feature</span> <span class="ow">in</span> <span class="n">target_features</span><span class="p">:</span>

                <span class="c1"># Iterate through all dataframe features</span>
                <span class="k">for</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>

                   <span class="c1"># Only compare selected features if user specfied features</span>
                   <span class="k">if</span> <span class="n">selected_features</span> <span class="ow">and</span> <span class="n">feature_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">selected_features</span> <span class="ow">and</span> <span class="n">feature_name</span> <span class="o">!=</span> <span class="n">target_feature</span><span class="p">:</span>
                       <span class="k">continue</span>

                   <span class="c1"># Ignore if the feature is found to be purely null</span>
                   <span class="k">if</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">null_only_features</span><span class="p">():</span>
                       <span class="k">continue</span>

                   <span class="c1"># Ignore datetime features</span>
                   <span class="k">if</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">datetime_features</span><span class="p">():</span>
                       <span class="k">continue</span>

                   <span class="bp">self</span><span class="o">.</span><span class="n">analyze_feature</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                        <span class="n">feature_name</span><span class="p">,</span>
                                        <span class="n">dataset_name</span><span class="p">,</span>
                                        <span class="n">target_feature</span><span class="o">=</span><span class="n">target_feature</span><span class="p">,</span>
                                        <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                        <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                                        <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                        <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                        <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
                                        <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">,</span>
                                        <span class="n">extra_tables</span><span class="o">=</span><span class="n">extra_tables</span><span class="p">)</span>

                   <span class="c1"># Aggregate data if target feature exists</span>
                   <span class="k">if</span> <span class="n">target_feature</span> <span class="ow">and</span> <span class="n">feature_name</span> <span class="o">==</span> <span class="n">target_feature</span> <span class="ow">and</span> <span class="n">aggregate_target_feature</span><span class="p">:</span>

                       <span class="c1"># -----</span>
                       <span class="k">if</span> <span class="n">target_feature</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">non_numerical_features</span><span class="p">()</span> <span class="ow">or</span> \
                               <span class="n">target_feature</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">bool_features</span><span class="p">():</span>

                           <span class="n">target_feature_values</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">target_feature</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>

                           <span class="c1"># Begin aggregation</span>
                           <span class="k">for</span> <span class="n">target_feature_val</span> <span class="ow">in</span> <span class="n">target_feature_values</span><span class="p">:</span>

                               <span class="n">repr_target_feature_val</span> <span class="o">=</span> <span class="n">target_feature_val</span>

                               <span class="c1"># Convert to best bool representation of value</span>
                               <span class="k">if</span> <span class="n">target_feature</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">bool_features</span><span class="p">():</span>

                                   <span class="k">try</span><span class="p">:</span>
                                       <span class="n">repr_target_feature_val</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">repr_target_feature_val</span><span class="p">))</span>

                                   <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                                       <span class="k">continue</span>

                                   <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                                       <span class="k">continue</span>

                               <span class="c1"># Iterate through all features to generate new graphs for aggregation</span>
                               <span class="k">for</span> <span class="n">f_name</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>

                                   <span class="k">if</span> <span class="n">selected_features</span> <span class="ow">and</span> <span class="n">f_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">selected_features</span> <span class="ow">and</span> <span class="n">f_name</span> <span class="o">!=</span> <span class="n">target_feature</span><span class="p">:</span>
                                       <span class="k">continue</span>

                                   <span class="k">if</span> <span class="n">f_name</span> <span class="o">==</span> <span class="n">target_feature</span><span class="p">:</span>
                                       <span class="k">continue</span>

                                   <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                                       <span class="k">if</span> <span class="n">repr_target_feature_val</span><span class="p">:</span>
                                           <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Target feature </span><span class="si">{target_feature}</span><span class="s2"> set to </span><span class="si">{target_feature_val}</span><span class="s2">; also known as </span><span class="si">{repr_target_feature_val}</span><span class="s2">.&quot;</span><span class="p">)</span>
                                       <span class="k">else</span><span class="p">:</span>
                                           <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Target feature </span><span class="si">{target_feature}</span><span class="s2"> set to </span><span class="si">{target_feature_val}</span><span class="s2">.&quot;</span><span class="p">)</span>
                                   <span class="k">try</span><span class="p">:</span>
                                       <span class="bp">self</span><span class="o">.</span><span class="n">analyze_feature</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">target_feature</span><span class="p">]</span> <span class="o">==</span> <span class="n">target_feature_val</span><span class="p">],</span>
                                                            <span class="n">f_name</span><span class="p">,</span>
                                                            <span class="n">dataset_name</span><span class="p">,</span>
                                                            <span class="n">target_feature</span><span class="o">=</span><span class="n">target_feature</span><span class="p">,</span>
                                                            <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                                            <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                                                            <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                                            <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                                            <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
                                                            <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">,</span>
                                                            <span class="n">sub_dir</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">/</span><span class="si">{target_feature}</span><span class="s2">/Where </span><span class="si">{target_feature}</span><span class="s2"> = </span><span class="si">{repr_target_feature_val}</span><span class="s2">/</span><span class="si">{f_name}</span><span class="s2">&quot;</span><span class="p">,</span>
                                                            <span class="n">extra_tables</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                                   <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                                       <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error found on feature </span><span class="si">{f_name}</span><span class="s2">: </span><span class="si">{e}</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="c1"># If any missed features are picked up...</span>
                <span class="n">missed_features</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">^</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">all_features</span><span class="p">()</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">missed_features</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">display_print</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Some features were not analyzed by perform analysis!&quot;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="n">missed_features</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Feature:</span><span class="si">{feature_name}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">statistical_analysis_on_aggregates</span> <span class="ow">and</span> <span class="n">target_feature</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">statistical_analysis_on_aggregates</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                                        <span class="n">target_features</span><span class="p">,</span>
                                                        <span class="n">dataset_name</span><span class="p">,</span>
                                                        <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="c1"># Ensures that called from perform is turned off</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span> <span class="o">=</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="FeatureAnalysis.analyze_feature"><a class="viewcode-back" href="../../../_autosummary_old/eflow.data_analysis.feature_analysis.html#eflow.data_analysis.feature_analysis.FeatureAnalysis.analyze_feature">[docs]</a>    <span class="k">def</span> <span class="nf">analyze_feature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">df</span><span class="p">,</span>
                        <span class="n">feature_name</span><span class="p">,</span>
                        <span class="n">dataset_name</span><span class="p">,</span>
                        <span class="n">target_feature</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">display_visuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">display_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">sub_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">save_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">figsize</span><span class="o">=</span><span class="n">GRAPH_DEFAULTS</span><span class="o">.</span><span class="n">FIGSIZE</span><span class="p">,</span>
                        <span class="n">extra_tables</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Generate&#39;s all graphic&#39;s for that given feature and the relationship</span>
<span class="sd">            to the target feature.</span>

<span class="sd">        Args:</span>
<span class="sd">            df: pd.Dataframe</span>
<span class="sd">                Pandas DataFrame object</span>

<span class="sd">            feature_name: string</span>
<span class="sd">                Specified feature column name.</span>

<span class="sd">            dataset_name: string</span>
<span class="sd">                The dataset&#39;s name; this will create a sub-directory in which your</span>
<span class="sd">                generated graph will be inner-nested in.</span>

<span class="sd">            target_feature: string</span>
<span class="sd">                Will create graphics involving this feature with the main</span>
<span class="sd">                feature &#39;feature_name&#39;.</span>

<span class="sd">            display_visuals: string</span>
<span class="sd">                Boolean value to whether or not to display visualizations.</span>

<span class="sd">            display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">            sub_dir: string</span>
<span class="sd">                Specify the sub directory to append to the pre-defined folder path.</span>

<span class="sd">            save_file: bool</span>
<span class="sd">                Saves file if set to True; doesn&#39;t if set to False.</span>

<span class="sd">            dataframe_snapshot: bool</span>
<span class="sd">                Boolean value to determine whether or not generate and compare a</span>
<span class="sd">                snapshot of the dataframe in the dataset&#39;s directory structure.</span>
<span class="sd">                Helps ensure that data generated in that directory is correctly</span>
<span class="sd">                associated to a dataframe.</span>

<span class="sd">            suppress_runtime_errors: bool</span>
<span class="sd">                If set to true; when generating any graphs will suppress any runtime</span>
<span class="sd">                errors so the program can keep running.</span>

<span class="sd">            extra_tables: bool</span>
<span class="sd">                When handling two types of features if set to true this will</span>
<span class="sd">                generate any extra tables that might be helpful.</span>
<span class="sd">                Note -</span>
<span class="sd">                    These graphics may create duplicates if you already applied</span>
<span class="sd">                    an aggregation in &#39;perform_analysis&#39;</span>

<span class="sd">        Raises:</span>
<span class="sd">            Raises error if the json file&#39;s snapshot of the given dataframe doesn&#39;t</span>
<span class="sd">            match the given dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># -----</span>
        <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                <span class="n">feature_name</span><span class="p">)</span>

        <span class="n">colors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_feature_colors</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                           <span class="n">feature_name</span><span class="p">)</span>

        <span class="c1"># Display colors</span>
        <span class="k">if</span> <span class="n">colors</span> <span class="ow">and</span> <span class="n">display_print</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Colors:</span><span class="se">\n</span><span class="si">{colors}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>


        <span class="c1"># Check if feature exist in df_features and by extension the dataframe</span>
        <span class="k">if</span> <span class="n">target_feature</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">target_feature</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">all_features</span><span class="p">():</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span><span class="s2">&quot;Target feature does not exist in pre-defined &quot;</span>
                                             <span class="s2">&quot;df_features!&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">target_feature</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span><span class="s2">&quot;Target feature does not exist in &quot;</span>
                                             <span class="s2">&quot;the dataframe!&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">feature_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">all_features</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span>
                <span class="s2">&quot;Feature name does not exist in pre-defined &quot;</span>
                <span class="s2">&quot;df_features!&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">feature_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span><span class="s2">&quot;Feature name does not exist in &quot;</span>
                                         <span class="s2">&quot;the dataframe!&quot;</span><span class="p">)</span>
        <span class="c1"># Generate sub directory structure for plots involving two features</span>
        <span class="n">two_dim_sub_dir</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">sub_dir</span><span class="p">:</span>
            <span class="n">two_dim_sub_dir</span> <span class="o">=</span> <span class="n">sub_dir</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">target_feature</span><span class="p">:</span>
                <span class="n">two_dim_sub_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">/</span><span class="si">{target_feature}</span><span class="s2">/Two feature analysis/</span><span class="si">{target_feature}</span><span class="s2"> by </span><span class="si">{feature_name}</span><span class="s2">&quot;</span>

        <span class="c1"># -----</span>
        <span class="k">if</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">non_numerical_features</span><span class="p">()</span> <span class="ow">or</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">bool_features</span><span class="p">():</span>

            <span class="c1"># Pie graph&#39;s should only have less than or equal to six.</span>
            <span class="c1"># (The function can handle ample more than this; just stylistically)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_pie_graph</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">feature_name</span><span class="p">,</span>
                                    <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                                    <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                    <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                                    <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                                    <span class="n">pallete</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
                                    <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                    <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                    <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
                                    <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">)</span>

            <span class="c1"># Count plot without colors</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_count_graph</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                  <span class="n">feature_name</span><span class="p">,</span>
                                  <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                                  <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                  <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                                  <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                                  <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                  <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                  <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">)</span>

            <span class="c1"># Count plot with colors</span>
            <span class="k">if</span> <span class="n">colors</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_count_graph</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                      <span class="n">feature_name</span><span class="p">,</span>
                                      <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                                      <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                      <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                                      <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                                      <span class="n">palette</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
                                      <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                      <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                      <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
                                      <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">)</span>

            <span class="c1"># Generate value counts table</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value_counts_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">feature_name</span><span class="p">,</span>
                                    <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                                    <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                    <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                                    <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                                    <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                    <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                    <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">)</span>

        <span class="c1"># -----</span>
        <span class="k">elif</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">continuous_numerical_features</span><span class="p">():</span>

            <span class="c1"># Plot distance plot graph</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_distance_graph</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                     <span class="n">feature_name</span><span class="p">,</span>
                                     <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                                     <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                     <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                                     <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                                     <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                     <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                     <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
                                     <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">)</span>

            <span class="c1"># Create description table</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">descr_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                             <span class="n">feature_name</span><span class="p">,</span>
                             <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                             <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                             <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                             <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                             <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                             <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                             <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">)</span>


        <span class="k">if</span> <span class="n">target_feature</span> <span class="ow">and</span> <span class="n">feature_name</span> <span class="o">!=</span> <span class="n">target_feature</span><span class="p">:</span>

            <span class="c1"># Simplified conditional check for finding type relationship between the two features</span>
            <span class="n">num_features</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">non_num_features</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">if</span> <span class="n">target_feature</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">continuous_numerical_features</span><span class="p">():</span>
                <span class="n">num_features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">target_feature</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">target_feature</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">datetime_features</span><span class="p">():</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">target_feature</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">continuous_numerical_features</span><span class="p">():</span>
                <span class="n">non_num_features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">target_feature</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">continuous_numerical_features</span><span class="p">():</span>
                <span class="n">num_features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature_name</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">datetime_features</span><span class="p">():</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">feature_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">continuous_numerical_features</span><span class="p">():</span>
                <span class="n">non_num_features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature_name</span><span class="p">)</span>

            <span class="c1"># Two different types of features (numerical and non-numerical)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">num_features</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">non_num_features</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>

                <span class="c1"># Extract out feature name&#39;s to better named variables for sanity</span>
                <span class="n">numerical_feature</span> <span class="o">=</span> <span class="n">num_features</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="n">non_numerical_feature</span> <span class="o">=</span> <span class="n">non_num_features</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

                <span class="c1"># Generate violin</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_violin_graph</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                       <span class="n">non_numerical_feature</span><span class="p">,</span>
                                       <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                                       <span class="n">other_feature_name</span><span class="o">=</span><span class="n">numerical_feature</span><span class="p">,</span>
                                       <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                       <span class="n">sub_dir</span><span class="o">=</span><span class="n">two_dim_sub_dir</span><span class="p">,</span>
                                       <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                                       <span class="n">palette</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
                                       <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                       <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                       <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
                                       <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">)</span>

                <span class="c1"># Generate ridge graph</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_ridge_graph</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                      <span class="n">non_numerical_feature</span><span class="p">,</span>
                                      <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                                      <span class="n">other_feature_name</span><span class="o">=</span><span class="n">numerical_feature</span><span class="p">,</span>
                                      <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                      <span class="n">sub_dir</span><span class="o">=</span><span class="n">two_dim_sub_dir</span><span class="p">,</span>
                                      <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                                      <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                      <span class="n">palette</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
                                      <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                      <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
                                      <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">)</span>

                <span class="c1"># Generate tables based on the aggregation of the non-numerical feature</span>
                <span class="k">if</span> <span class="n">extra_tables</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="n">non_numerical_feature</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>

                        <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Where </span><span class="si">{non_numerical_feature}</span><span class="s2"> = </span><span class="si">{val}</span><span class="s2">&quot;</span><span class="p">)</span>

                        <span class="c1"># Create new sub dir based on the aggregation</span>
                        <span class="n">two_dim_desc_sub_dir</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span>
                            <span class="n">two_dim_sub_dir</span><span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">two_dim_desc_sub_dir</span><span class="p">:</span>
                            <span class="n">two_dim_desc_sub_dir</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                        <span class="n">two_dim_desc_sub_dir</span> <span class="o">+=</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

                        <span class="c1"># Create new dataframe on aggregated value and check for nans</span>
                        <span class="n">tmp_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">non_numerical_feature</span><span class="p">]</span> <span class="o">==</span> <span class="n">val</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">tmp_df</span><span class="p">[</span><span class="n">numerical_feature</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">!=</span> \
                                <span class="n">tmp_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>

                            <span class="bp">self</span><span class="o">.</span><span class="n">descr_table</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">tmp_df</span><span class="p">,</span>
                                             <span class="n">feature_name</span><span class="o">=</span><span class="n">numerical_feature</span><span class="p">,</span>
                                             <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                                             <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                             <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">,</span>
                                             <span class="n">sub_dir</span><span class="o">=</span><span class="n">two_dim_desc_sub_dir</span><span class="p">,</span>
                                             <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

                        <span class="k">del</span> <span class="n">tmp_df</span>

            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">non_num_features</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>

                <span class="c1"># Generate tables based on the aggregation of the non-numerical feature</span>
                <span class="k">if</span> <span class="n">extra_tables</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>

                        <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Where </span><span class="si">{feature_name}</span><span class="s2"> = </span><span class="si">{val}</span><span class="s2">&quot;</span><span class="p">)</span>

                        <span class="c1"># Create new sub dir based on the aggregation</span>
                        <span class="n">two_dim_desc_sub_dir</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span>
                            <span class="n">two_dim_sub_dir</span><span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">two_dim_desc_sub_dir</span><span class="p">:</span>
                            <span class="n">two_dim_desc_sub_dir</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                        <span class="n">two_dim_desc_sub_dir</span> <span class="o">+=</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

                        <span class="c1"># Create new dataframe on aggregated value and check for nans</span>
                        <span class="n">tmp_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">val</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">tmp_df</span><span class="p">[</span><span class="n">target_feature</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">!=</span> \
                                <span class="n">tmp_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">value_counts_table</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">val</span><span class="p">],</span>
                                                    <span class="n">feature_name</span><span class="o">=</span><span class="n">target_feature</span><span class="p">,</span>
                                                    <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                                                    <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                                    <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">,</span>
                                                    <span class="n">sub_dir</span><span class="o">=</span><span class="n">two_dim_desc_sub_dir</span><span class="p">,</span>
                                                    <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">group_by_feature_value_count_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                                        <span class="n">feature_name</span><span class="p">,</span>
                                                        <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                                                        <span class="n">other_feature_name</span><span class="o">=</span><span class="n">target_feature</span><span class="p">,</span>
                                                        <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                                        <span class="n">sub_dir</span><span class="o">=</span><span class="n">two_dim_sub_dir</span><span class="p">,</span>
                                                        <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                                                        <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                                        <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                                        <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_multi_bar_graph</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                          <span class="n">feature_name</span><span class="p">,</span>
                                          <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                                          <span class="n">other_feature_name</span><span class="o">=</span><span class="n">target_feature</span><span class="p">,</span>
                                          <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                          <span class="n">sub_dir</span><span class="o">=</span><span class="n">two_dim_sub_dir</span><span class="p">,</span>
                                          <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                                          <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                          <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                          <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
                                          <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">,</span>
                                          <span class="n">stacked</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">plot_multi_bar_graph</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                          <span class="n">feature_name</span><span class="p">,</span>
                                          <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                                          <span class="n">other_feature_name</span><span class="o">=</span><span class="n">target_feature</span><span class="p">,</span>
                                          <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                          <span class="n">sub_dir</span><span class="o">=</span><span class="n">two_dim_sub_dir</span><span class="p">,</span>
                                          <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                                          <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                          <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                          <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
                                          <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">,</span>
                                          <span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">num_features</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>

                <span class="c1"># Generate jointplot graph with scatter and kde</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_jointplot_graph</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                          <span class="n">feature_name</span><span class="p">,</span>
                                          <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                                          <span class="n">other_feature_name</span><span class="o">=</span><span class="n">target_feature</span><span class="p">,</span>
                                          <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                          <span class="n">sub_dir</span><span class="o">=</span><span class="n">two_dim_sub_dir</span><span class="p">,</span>
                                          <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                                          <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                          <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
                                          <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                          <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
                                          <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">)</span>

                <span class="c1"># Generate jointplot graph with kde</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_jointplot_graph</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                          <span class="n">feature_name</span><span class="p">,</span>
                                          <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
                                          <span class="n">other_feature_name</span><span class="o">=</span><span class="n">target_feature</span><span class="p">,</span>
                                          <span class="n">display_visuals</span><span class="o">=</span><span class="n">display_visuals</span><span class="p">,</span>
                                          <span class="n">sub_dir</span><span class="o">=</span><span class="n">two_dim_sub_dir</span><span class="p">,</span>
                                          <span class="n">save_file</span><span class="o">=</span><span class="n">save_file</span><span class="p">,</span>
                                          <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                          <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
                                          <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                          <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
                                          <span class="n">display_print</span><span class="o">=</span><span class="n">display_print</span><span class="p">,</span>
                                          <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;kde&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="FeatureAnalysis.plot_distance_graph"><a class="viewcode-back" href="../../../_autosummary_old/eflow.data_analysis.feature_analysis.html#eflow.data_analysis.feature_analysis.FeatureAnalysis.plot_distance_graph">[docs]</a>    <span class="k">def</span> <span class="nf">plot_distance_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                            <span class="n">df</span><span class="p">,</span>
                            <span class="n">feature_name</span><span class="p">,</span>
                            <span class="n">dataset_name</span><span class="p">,</span>
                            <span class="n">display_visuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">display_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">sub_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">save_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">figsize</span><span class="o">=</span><span class="n">GRAPH_DEFAULTS</span><span class="o">.</span><span class="n">FIGSIZE</span><span class="p">,</span>
                            <span class="n">bins</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">norm_hist</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">hist</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">fit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">fit_kws</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Display a distance plot and save the graph in the correct directory.</span>

<span class="sd">        Args:</span>
<span class="sd">            df: pd.Dataframe</span>
<span class="sd">                Pandas dataframe object</span>

<span class="sd">            feature_name: string</span>
<span class="sd">                Specified feature column name.</span>

<span class="sd">            dataset_name: string</span>
<span class="sd">                The dataset&#39;s name; this will create a sub-directory in which your</span>
<span class="sd">                generated graph will be inner-nested in.</span>

<span class="sd">            display_visuals: bool</span>
<span class="sd">                Boolean value to whether or not to display visualizations.</span>

<span class="sd">            display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">            filename: string</span>
<span class="sd">                Name to give the file.</span>

<span class="sd">            sub_dir: string</span>
<span class="sd">                Specify the sub directory to append to the pre-defined folder path.</span>

<span class="sd">            save_file: bool</span>
<span class="sd">                Boolean value to whether or not to save the file.</span>

<span class="sd">            dataframe_snapshot: bool</span>
<span class="sd">                Boolean value to determine whether or not generate and compare a</span>
<span class="sd">                snapshot of the dataframe in the dataset&#39;s directory structure.</span>
<span class="sd">                Helps ensure that data generated in that directory is correctly</span>
<span class="sd">                associated to a dataframe.</span>

<span class="sd">            suppress_runtime_errors: bool</span>
<span class="sd">                If set to true; when generating any graphs will suppress any runtime</span>
<span class="sd">                errors so the program can keep running.</span>

<span class="sd">            figsize: tuple</span>
<span class="sd">                The given size of the plot.</span>

<span class="sd">            bins: int</span>
<span class="sd">                Specification of hist bins, or None to use Freedman-Diaconis rule.</span>

<span class="sd">            norm_hist: bool</span>
<span class="sd">                If True, the histogram height shows a density rather than a count. This is implied if a KDE or fitted density is plotted.</span>

<span class="sd">            hist: bool</span>
<span class="sd">                Whether to plot a (normed) histogram.</span>

<span class="sd">            kde: bool</span>
<span class="sd">                Whether to plot a gaussian kernel density estimate.</span>

<span class="sd">            colors : matplotlib color</span>
<span class="sd">                Color to plot everything but the fitted curve in.</span>

<span class="sd">            fit: functional method</span>
<span class="sd">                An object with fit method, returning a tuple that can be passed</span>
<span class="sd">                to a pdf method a positional arguments following an grid of</span>
<span class="sd">                values to evaluate the pdf on.</span>

<span class="sd">            fit_kws : dictionaries, optional</span>
<span class="sd">                Keyword arguments for underlying plotting functions.</span>

<span class="sd">            Credit to seaborn&#39;s author:</span>
<span class="sd">            Michael Waskom</span>
<span class="sd">            Git username: mwaskom</span>
<span class="sd">            Doc Link: http://tinyurl.com/ycco2hok</span>

<span class="sd">        Raises:</span>
<span class="sd">            Raises error if the feature data is filled with only nulls or if</span>
<span class="sd">            the json file&#39;s snapshot of the given dataframe doesn&#39;t match the</span>
<span class="sd">            given dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>

            <span class="c1"># -----</span>
            <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">feature_name</span><span class="p">)</span>

            <span class="c1"># Error check</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span>
                    <span class="s2">&quot;Distance plot graph couldn&#39;t be generated because &quot;</span> <span class="o">+</span>
                    <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{feature_name}</span><span class="s2">!&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generating graph for distance plot on </span><span class="si">{feature_name}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">feature_values</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span>
                                           <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">feature_values</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The given feature </span><span class="si">{feature_name}</span><span class="s2"> doesn&#39;t seem to convert to a numeric vector.&quot;</span><span class="p">)</span>

            <span class="c1"># Closes up any past graph info</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>

            <span class="c1"># Set foundation graph info</span>
            <span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;whitegrid&quot;</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distance Plot: &quot;</span> <span class="o">+</span> <span class="n">feature_name</span><span class="p">)</span>

            <span class="c1"># Create seaborn graph</span>
            <span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">feature_values</span><span class="p">,</span>
                         <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span>
                         <span class="n">hist</span><span class="o">=</span><span class="n">hist</span><span class="p">,</span>
                         <span class="n">kde</span><span class="o">=</span><span class="n">kde</span><span class="p">,</span>
                         <span class="n">fit</span><span class="o">=</span><span class="n">fit</span><span class="p">,</span>
                         <span class="n">fit_kws</span><span class="o">=</span><span class="n">fit_kws</span><span class="p">,</span>
                         <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
                         <span class="n">norm_hist</span><span class="o">=</span><span class="n">norm_hist</span><span class="p">)</span>

            <span class="c1"># Pass a default name if needed</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Distance plot graph on </span><span class="si">{feature_name}</span><span class="s2">&quot;</span>

            <span class="c1"># Create string sub directory path</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">sub_dir</span><span class="p">:</span>
                <span class="n">sub_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">/</span><span class="si">{feature_name}</span><span class="s2">&quot;</span>

            <span class="c1"># -----</span>
            <span class="k">if</span> <span class="n">save_file</span><span class="p">:</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">:</span>
                    <span class="n">dataframe_snapshot</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">save_plot</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
                               <span class="n">df_features</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                               <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                               <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                               <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                               <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                               <span class="n">meta_data</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__notebook_mode</span> <span class="ow">and</span> <span class="n">display_visuals</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">except</span> <span class="n">SnapshotMismatchError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">suppress_runtime_errors</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Distance plot graph throw an error on feature &#39;</span><span class="si">{feature_name}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="s2">{str(e)}&quot;</span><span class="p">,</span>
                    <span class="ne">RuntimeWarning</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">e</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="FeatureAnalysis.plot_violin_graph"><a class="viewcode-back" href="../../../_autosummary_old/eflow.data_analysis.feature_analysis.html#eflow.data_analysis.feature_analysis.FeatureAnalysis.plot_violin_graph">[docs]</a>    <span class="k">def</span> <span class="nf">plot_violin_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                          <span class="n">df</span><span class="p">,</span>
                          <span class="n">feature_name</span><span class="p">,</span>
                          <span class="n">dataset_name</span><span class="p">,</span>
                          <span class="n">other_feature_name</span><span class="p">,</span>
                          <span class="n">display_visuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">display_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">sub_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">save_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">figsize</span><span class="o">=</span><span class="n">GRAPH_DEFAULTS</span><span class="o">.</span><span class="n">FIGSIZE</span><span class="p">,</span>
                          <span class="n">order</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">cut</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                          <span class="n">scale</span><span class="o">=</span><span class="s1">&#39;area&#39;</span><span class="p">,</span>
                          <span class="n">gridsize</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                          <span class="n">width</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
                          <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">saturation</span><span class="o">=</span><span class="mf">0.75</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Display a violin plot and save the graph in the correct directory.</span>

<span class="sd">        Args:</span>
<span class="sd">            df: pd.Dataframe</span>
<span class="sd">                Pandas dataframe object</span>

<span class="sd">            feature_name: string</span>
<span class="sd">                Specified feature column name to compare to y.</span>

<span class="sd">            dataset_name: string</span>
<span class="sd">                The dataset&#39;s name; this will create a sub-directory in which your</span>
<span class="sd">                generated graph will be inner-nested in.</span>

<span class="sd">            other_feature_name: string</span>
<span class="sd">                Specified feature column name to compare to x.</span>

<span class="sd">            display_visuals: bool</span>
<span class="sd">                Boolean value to whether or not to display visualizations.</span>

<span class="sd">            filename: string</span>
<span class="sd">                Name to give the file.</span>

<span class="sd">            sub_dir: string</span>
<span class="sd">                Specify the sub directory to append to the pre-defined folder path.</span>

<span class="sd">            save_file: bool</span>
<span class="sd">                Boolean value to whether or not to save the file.</span>

<span class="sd">            dataframe_snapshot: bool</span>
<span class="sd">                Boolean value to determine whether or not generate and compare a</span>
<span class="sd">                snapshot of the dataframe in the dataset&#39;s directory structure.</span>
<span class="sd">                Helps ensure that data generated in that directory is correctly</span>
<span class="sd">                associated to a dataframe.</span>

<span class="sd">            suppress_runtime_errors: bool</span>
<span class="sd">                If set to true; when generating any graphs will suppress any runtime</span>
<span class="sd">                errors so the program can keep running.</span>

<span class="sd">            display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">            figsize: tuple</span>
<span class="sd">                Size of the given plot.</span>

<span class="sd">            order: lists of strings</span>
<span class="sd">                Order to plot the categorical levels in, otherwise the levels</span>
<span class="sd">                are inferred from the data objects.</span>

<span class="sd">            cut: float</span>
<span class="sd">                Distance, in units of bandwidth size, to extend the density</span>
<span class="sd">                past the extreme datapoints. Set to 0 to limit the violin range</span>
<span class="sd">                within the range of the observed data.</span>
<span class="sd">                (i.e., to have the same effect as trim=True in ggplot.)</span>

<span class="sd">            scale: string</span>
<span class="sd">                {area, count, width}</span>
<span class="sd">                The method used to scale the width of each violin. If area,</span>
<span class="sd">                each violin will have the same area. If count, the width of the</span>
<span class="sd">                violins will be scaled by the number of observations in that</span>
<span class="sd">                bin. If width, each violin will have the same width.</span>

<span class="sd">            gridsize: int</span>
<span class="sd">                Number of points in the discrete grid used to compute the kernel density estimate.</span>

<span class="sd">            width: float</span>
<span class="sd">                Width of a full element when not using hue nesting, or width of</span>
<span class="sd">                all the elements for one level of the major grouping variable.</span>

<span class="sd">            palette: dict or string</span>
<span class="sd">                Colors to use for the different levels of the hue variable.</span>
<span class="sd">                Should be something that can be interpreted by color_palette(),</span>
<span class="sd">                or a dictionary mapping hue levels to matplotlib colors.</span>

<span class="sd">            saturation: float</span>
<span class="sd">                Proportion of the original saturation to draw colors at. Large</span>
<span class="sd">                patches often look better with slightly desaturated colors, but</span>
<span class="sd">                set this to 1 if you want the plot colors to perfectly match</span>
<span class="sd">                the input color spec.</span>

<span class="sd">            Credit to seaborn&#39;s author:</span>
<span class="sd">            Michael Waskom</span>
<span class="sd">            Git username: mwaskom</span>
<span class="sd">            Doc link: http://tinyurl.com/y3hxxzgv</span>

<span class="sd">        Raises:</span>
<span class="sd">            Raises error if the feature data is filled with only nulls or if</span>
<span class="sd">            the json file&#39;s snapshot of the given dataframe doesn&#39;t match the</span>
<span class="sd">            given dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>

            <span class="c1"># -----</span>
            <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">feature_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">other_feature_name</span><span class="p">:</span>
                <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                        <span class="n">other_feature_name</span><span class="p">)</span>

            <span class="c1"># Error check and create title/part of default file name</span>
            <span class="n">found_features</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">feature_title</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="p">(</span><span class="n">feature_name</span><span class="p">,</span> <span class="n">other_feature_name</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">feature</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span><span class="s2">&quot;Count plot graph couldn&#39;t be generated because &quot;</span> <span class="o">+</span>
                              <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{feature}</span><span class="s2">!&quot;</span><span class="p">)</span>

                    <span class="n">found_features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_features</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">feature_title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{feature}</span><span class="s2">&quot;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">feature_title</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; by </span><span class="si">{feature}</span><span class="s2">&quot;</span>


            <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">found_features</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span><span class="s2">&quot;Both x and y feature&#39;s are type &#39;None&#39;. Please pass at least one feature.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span>
                    <span class="s2">&quot;Violin plot graph couldn&#39;t be generated because &quot;</span> <span class="o">+</span>
                    <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{feature_name}</span><span class="s2">!&quot;</span><span class="p">)</span>

            <span class="k">del</span> <span class="n">found_features</span>

            <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generating graph violin graph on &quot;</span> <span class="o">+</span> <span class="n">feature_title</span><span class="p">)</span>

            <span class="c1"># Closes up any past graph info</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>

            <span class="c1"># Set plot structure</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>

            <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Violin Plot: &quot;</span> <span class="o">+</span> <span class="n">feature_title</span><span class="p">)</span>

            <span class="n">feature_values</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">other_feature_name</span><span class="p">],</span>
                                           <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">feature_values</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The y feature must contain numerical features.&quot;</span><span class="p">)</span>

            <span class="n">x_values</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>

            <span class="c1"># if feature_name in self.__df_features.bool_features():</span>
            <span class="c1">#     x_values = pd.to_numeric(x_values,</span>
            <span class="c1">#                              errors=&#39;ignore&#39;)</span>
            <span class="c1">#</span>
            <span class="c1">#     x_values = [&#39;True&#39; if val == 1 else &#39;False&#39;</span>
            <span class="c1">#                 if val == 0 else val</span>
            <span class="c1">#                 for val in x_values]</span>

            <span class="c1"># Sort list by x_values</span>
            <span class="n">x_values</span><span class="p">,</span> <span class="n">feature_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sort_two_lists</span><span class="p">(</span><span class="n">x_values</span><span class="p">,</span><span class="n">feature_values</span><span class="p">)</span>

            <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

            <span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x_values</span><span class="p">,</span>
                           <span class="n">y</span><span class="o">=</span><span class="n">feature_values</span><span class="p">,</span>
                           <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
                           <span class="n">cut</span><span class="o">=</span><span class="n">cut</span><span class="p">,</span>
                           <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
                           <span class="n">gridsize</span><span class="o">=</span><span class="n">gridsize</span><span class="p">,</span>
                           <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
                           <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span>
                           <span class="n">saturation</span><span class="o">=</span><span class="n">saturation</span><span class="p">)</span>

            <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>

            <span class="c1"># Pass a default name if needed</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Violin plot graph on </span><span class="si">{feature_title}</span><span class="s2">.&quot;</span>

            <span class="c1"># Create string sub directory path</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">sub_dir</span><span class="p">:</span>
                <span class="n">sub_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">/</span><span class="si">{feature_name}</span><span class="s2">&quot;</span>

            <span class="c1"># -----</span>
            <span class="k">if</span> <span class="n">save_file</span><span class="p">:</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">:</span>
                    <span class="n">dataframe_snapshot</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">save_plot</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
                               <span class="n">df_features</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                               <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                               <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                               <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                               <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                               <span class="n">meta_data</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__notebook_mode</span> <span class="ow">and</span> <span class="n">display_visuals</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">except</span> <span class="n">SnapshotMismatchError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">suppress_runtime_errors</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Plot violin graph an error on feature &#39;</span><span class="si">{feature_name}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="s2">{str(e)}&quot;</span><span class="p">,</span>
                    <span class="ne">RuntimeWarning</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">e</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="FeatureAnalysis.plot_count_graph"><a class="viewcode-back" href="../../../_autosummary_old/eflow.data_analysis.feature_analysis.html#eflow.data_analysis.feature_analysis.FeatureAnalysis.plot_count_graph">[docs]</a>    <span class="k">def</span> <span class="nf">plot_count_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">df</span><span class="p">,</span>
                         <span class="n">feature_name</span><span class="p">,</span>
                         <span class="n">dataset_name</span><span class="p">,</span>
                         <span class="n">display_visuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">display_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">sub_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">save_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">figsize</span><span class="o">=</span><span class="n">GRAPH_DEFAULTS</span><span class="o">.</span><span class="n">FIGSIZE</span><span class="p">,</span>
                         <span class="n">flip_axis</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;PuBu&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Display a barplot with color ranking from a feature&#39;s value counts</span>
<span class="sd">            from the seaborn libary and save the graph in the correct directory</span>
<span class="sd">            structure.</span>

<span class="sd">        Args:</span>
<span class="sd">            df: pd.Dataframe</span>
<span class="sd">                Pandas dataframe object.</span>

<span class="sd">            feature_name: string</span>
<span class="sd">                Specified feature column name.</span>

<span class="sd">            dataset_name: string</span>
<span class="sd">                The dataset&#39;s name; this will create a sub-directory in which your</span>
<span class="sd">                generated graph will be inner-nested in.</span>

<span class="sd">            display_visuals: bool</span>
<span class="sd">                Boolean value to whether or not to display visualizations.</span>

<span class="sd">            display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">            filename: string</span>
<span class="sd">                Name to give the file.</span>

<span class="sd">            sub_dir: string</span>
<span class="sd">                Specify the sub directory to append to the pre-defined folder path.</span>

<span class="sd">            save_file: bool</span>
<span class="sd">                Boolean value to whether or not to save the file.</span>

<span class="sd">            dataframe_snapshot: bool</span>
<span class="sd">                Boolean value to determine whether or not generate and compare a</span>
<span class="sd">                snapshot of the dataframe in the dataset&#39;s directory structure.</span>
<span class="sd">                Helps ensure that data generated in that directory is correctly</span>
<span class="sd">                associated to a dataframe.</span>

<span class="sd">            suppress_runtime_errors: bool</span>
<span class="sd">                If set to true; when generating any graphs will suppress any runtime</span>
<span class="sd">                errors so the program can keep running.</span>

<span class="sd">            display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">            figsize: tuple</span>
<span class="sd">                Size for the given plot.</span>

<span class="sd">            flip_axis: bool</span>
<span class="sd">                Flip the axis the ploting axis from x to y if set to &#39;True&#39;.</span>

<span class="sd">            palette: dict or string</span>
<span class="sd">                String representation of color pallete for ranking from seaborn&#39;s pallete.</span>

<span class="sd">            Credit to seaborn&#39;s author:</span>
<span class="sd">            Michael Waskom</span>
<span class="sd">            Git username: mwaskom</span>
<span class="sd">            Link: http://tinyurl.com/y4pzrgcf</span>

<span class="sd">        Raises:</span>
<span class="sd">            Raises error if the feature data is filled with only nulls or if</span>
<span class="sd">            the json file&#39;s snapshot of the given dataframe doesn&#39;t match the</span>
<span class="sd">            given dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>

            <span class="c1"># -----</span>
            <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">feature_name</span><span class="p">)</span>

            <span class="c1"># Error check</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span>
                    <span class="s2">&quot;Count plot graph couldn&#39;t be generated because &quot;</span> <span class="o">+</span>
                    <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{feature_name}</span><span class="s2">!&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Count plot graph on </span><span class="si">{feature_name}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Closes up any past graph info</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>

            <span class="c1"># Set graph info</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
            <span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;whitegrid&quot;</span><span class="p">)</span>

            <span class="n">value_counts</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">sort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="n">feature_values</span><span class="p">,</span><span class="n">counts</span> <span class="o">=</span> <span class="n">value_counts</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">value_counts</span><span class="o">.</span><span class="n">values</span>
            <span class="k">del</span> <span class="n">value_counts</span>

            <span class="c1"># Find and rank values based on counts for color variation of the graph</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">palette</span><span class="p">:</span>
                <span class="n">palette</span> <span class="o">=</span> <span class="s2">&quot;PuBu&quot;</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
                <span class="n">rank_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">counts</span><span class="p">))</span><span class="o">.</span><span class="n">argsort</span><span class="p">()</span>
                <span class="n">pal</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">counts</span><span class="p">))</span>
                <span class="n">palette</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pal</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])[</span><span class="n">rank_list</span><span class="p">]</span>

            <span class="n">plt</span><span class="o">.</span><span class="n">clf</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">bool_features</span><span class="p">():</span>

                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">feature_values</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">feature_values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">pass</span>

                <span class="n">feature_values</span> <span class="o">=</span> <span class="p">[</span><span class="nb">bool</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">val</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">val</span>
                                  <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">feature_values</span><span class="p">]</span>

            <span class="c1"># Flip the graph for visual flare</span>
            <span class="k">if</span> <span class="n">flip_axis</span><span class="p">:</span>
                <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">counts</span><span class="p">,</span>
                                 <span class="n">y</span><span class="o">=</span><span class="n">feature_values</span><span class="p">,</span>
                                 <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span>
                                 <span class="n">order</span><span class="o">=</span><span class="n">feature_values</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">feature_values</span><span class="p">,</span>
                                 <span class="n">y</span><span class="o">=</span><span class="n">counts</span><span class="p">,</span>
                                 <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span>
                                 <span class="n">order</span><span class="o">=</span><span class="n">feature_values</span><span class="p">)</span>

            <span class="c1"># Labels for numerical count of each bar</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
                <span class="n">height</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="n">p</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">,</span>
                        <span class="n">height</span> <span class="o">+</span> <span class="mi">3</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="si">{:1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">height</span><span class="p">),</span>
                        <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>

            <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Category Count Plot: &quot;</span> <span class="o">+</span> <span class="n">feature_name</span><span class="p">)</span>

            <span class="c1"># Pass a default name if needed</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Count plot graph on </span><span class="si">{feature_name}</span><span class="s2">&quot;</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
                    <span class="n">filename</span> <span class="o">+=</span> <span class="s2">&quot; with count color ranking.&quot;</span>

            <span class="c1"># Create string sub directory path</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">sub_dir</span><span class="p">:</span>
                <span class="n">sub_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">/</span><span class="si">{feature_name}</span><span class="s2">&quot;</span>

            <span class="c1"># -----</span>
            <span class="k">if</span> <span class="n">save_file</span><span class="p">:</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">:</span>
                    <span class="n">dataframe_snapshot</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">save_plot</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
                               <span class="n">df_features</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                               <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                               <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                               <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                               <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                               <span class="n">meta_data</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__notebook_mode</span> <span class="ow">and</span> <span class="n">display_visuals</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">except</span> <span class="n">SnapshotMismatchError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">suppress_runtime_errors</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Plot count graph raised an error on feature &#39;</span><span class="si">{feature_name}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="s2">{str(e)}&quot;</span><span class="p">,</span>
                    <span class="ne">RuntimeWarning</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">e</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="FeatureAnalysis.plot_pie_graph"><a class="viewcode-back" href="../../../_autosummary_old/eflow.data_analysis.feature_analysis.html#eflow.data_analysis.feature_analysis.FeatureAnalysis.plot_pie_graph">[docs]</a>    <span class="k">def</span> <span class="nf">plot_pie_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">df</span><span class="p">,</span>
                       <span class="n">feature_name</span><span class="p">,</span>
                       <span class="n">dataset_name</span><span class="p">,</span>
                       <span class="n">display_visuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">display_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">sub_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">save_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">figsize</span><span class="o">=</span><span class="n">GRAPH_DEFAULTS</span><span class="o">.</span><span class="n">FIGSIZE</span><span class="p">,</span>
                       <span class="n">pallete</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Display a pie graph and save the graph in the correct directory.</span>

<span class="sd">        Args:</span>
<span class="sd">           df:</span>
<span class="sd">               Pandas DataFrame object.</span>

<span class="sd">           feature_name:</span>
<span class="sd">               Specified feature column name.</span>

<span class="sd">           dataset_name:</span>
<span class="sd">               The dataset&#39;s name; this will create a sub-directory in which your</span>
<span class="sd">               generated graph will be inner-nested in.</span>

<span class="sd">           display_visuals:</span>
<span class="sd">               Boolean value to whether or not to display visualizations.</span>

<span class="sd">           display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">           filename:</span>
<span class="sd">               If set to &#39;None&#39; will default to a pre-defined string;</span>
<span class="sd">               unless it is set to an actual filename.</span>

<span class="sd">           sub_dir:</span>
<span class="sd">               Specify the sub directory to append to the pre-defined folder path.</span>

<span class="sd">           save_file:</span>
<span class="sd">               Boolean value to whether or not to save the file.</span>

<span class="sd">           dataframe_snapshot:</span>
<span class="sd">                Boolean value to determine whether or not generate and compare a</span>
<span class="sd">                snapshot of the dataframe in the dataset&#39;s directory structure.</span>
<span class="sd">                Helps ensure that data generated in that directory is correctly</span>
<span class="sd">                associated to a dataframe.</span>

<span class="sd">           suppress_runtime_errors: bool</span>
<span class="sd">                If set to true; when generating any graphs will suppress any runtime</span>
<span class="sd">                errors so the program can keep running.</span>

<span class="sd">           figsize: tuple</span>
<span class="sd">                Size of the plot.</span>

<span class="sd">           pallete: dict or string</span>
<span class="sd">                Dictionary of all feature values to hex color values.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Raises error if the feature data is filled with only nulls or if</span>
<span class="sd">            the json file&#39;s snapshot of the given dataframe doesn&#39;t match the</span>
<span class="sd">            given dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>

            <span class="c1"># -----</span>
            <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">feature_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span><span class="s2">&quot;Pie graph couldn&#39;t be generated because &quot;</span> <span class="o">+</span>
                      <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{feature_name}</span><span class="s2">!&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pie graph on </span><span class="si">{feature_name}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Closes up any past graph info</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>

            <span class="c1"># Find value counts</span>
            <span class="n">value_counts</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">feature_values</span> <span class="o">=</span> <span class="n">value_counts</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="n">value_count_list</span> <span class="o">=</span> <span class="n">value_counts</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

            <span class="n">color_list</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>

            <span class="c1"># if feature_name in self.__df_features.bool_features():</span>
            <span class="c1">#</span>
            <span class="c1">#     i = 0</span>
            <span class="c1">#     for val in feature_values:</span>
            <span class="c1">#         try:</span>
            <span class="c1">#             feature_values[i] = float(val)</span>
            <span class="c1">#         except:</span>
            <span class="c1">#             pass</span>
            <span class="c1">#     feature_values = [bool(val) if val == 0 or val == 1 else val</span>
            <span class="c1">#                       for val in feature_values]</span>

            <span class="c1"># Sort by feature_values</span>
            <span class="n">feature_values</span><span class="p">,</span><span class="n">value_count_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sort_two_lists</span><span class="p">(</span><span class="n">feature_values</span><span class="p">,</span>
                                                                    <span class="n">value_count_list</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pallete</span><span class="p">,</span><span class="nb">dict</span><span class="p">):</span>
                <span class="n">color_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">feature_values</span><span class="p">):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">color_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pallete</span><span class="p">[</span><span class="n">value</span><span class="p">])</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The given value &#39;</span><span class="si">{value}</span><span class="s2">&#39; in feature &#39;</span><span class="si">{feature_name}</span><span class="s2">&#39;&quot;</span>
                                       <span class="o">+</span> <span class="s2">&quot; was not found in the passed color dict.&quot;</span><span class="p">)</span>

            <span class="c1"># Explode the part of the pie graph that is the maximum of the graph</span>
            <span class="n">explode_array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">feature_values</span><span class="p">)</span>
            <span class="n">explode_array</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">value_count_list</span><span class="p">)</span><span class="o">.</span><span class="n">argmax</span><span class="p">()]</span> <span class="o">=</span> <span class="o">.</span><span class="mi">03</span>

            <span class="c1"># Plot pie graph</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span>
                <span class="nb">tuple</span><span class="p">(</span><span class="n">value_count_list</span><span class="p">),</span>
                <span class="n">labels</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">feature_values</span><span class="p">),</span>
                <span class="n">shadow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">colors</span><span class="o">=</span><span class="n">color_list</span><span class="p">,</span>
                <span class="n">explode</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">explode_array</span><span class="p">),</span>
                <span class="n">startangle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span>
                <span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.1f%%</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># Set foundation graph info</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Pie Chart: &quot;</span> <span class="o">+</span> <span class="n">feature_name</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fancybox</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

            <span class="c1"># Set foundation</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>

            <span class="c1"># Pass a default name if needed</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Pie graph on </span><span class="si">{feature_name}</span><span class="s2">&quot;</span>

            <span class="c1"># Create string sub directory path</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">sub_dir</span><span class="p">:</span>
                <span class="n">sub_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">/</span><span class="si">{feature_name}</span><span class="s2">&quot;</span>

            <span class="c1"># -----</span>
            <span class="k">if</span> <span class="n">save_file</span><span class="p">:</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">:</span>
                    <span class="n">dataframe_snapshot</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">save_plot</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
                               <span class="n">df_features</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                               <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                               <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                               <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                               <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                               <span class="n">meta_data</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">)</span>


            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__notebook_mode</span> <span class="ow">and</span> <span class="n">display_visuals</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">except</span> <span class="n">SnapshotMismatchError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">suppress_runtime_errors</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Pie graph raised an error on feature &#39;</span><span class="si">{feature_name}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="s2">{str(e)}&quot;</span><span class="p">,</span>
                    <span class="ne">RuntimeWarning</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">e</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="FeatureAnalysis.plot_ridge_graph"><a class="viewcode-back" href="../../../_autosummary_old/eflow.data_analysis.feature_analysis.html#eflow.data_analysis.feature_analysis.FeatureAnalysis.plot_ridge_graph">[docs]</a>    <span class="k">def</span> <span class="nf">plot_ridge_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">df</span><span class="p">,</span>
                         <span class="n">feature_name</span><span class="p">,</span>
                         <span class="n">dataset_name</span><span class="p">,</span>
                         <span class="n">other_feature_name</span><span class="p">,</span>
                         <span class="n">display_visuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">display_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">sub_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">save_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">figsize</span><span class="o">=</span><span class="n">GRAPH_DEFAULTS</span><span class="o">.</span><span class="n">FIGSIZE</span><span class="p">,</span>
                         <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Display a ridge plot and save the graph in the correct directory.</span>

<span class="sd">        Args:</span>
<span class="sd">            df: pd.Dataframe</span>
<span class="sd">                Pandas DataFrame object.</span>

<span class="sd">            feature_name: string</span>
<span class="sd">                Specified feature column name.</span>

<span class="sd">            dataset_name: string</span>
<span class="sd">                The dataset&#39;s name; this will create a sub-directory in which your</span>
<span class="sd">                generated graph will be inner-nested in.</span>

<span class="sd">            other_feature_name: string</span>
<span class="sd">                Feature to compare to.</span>

<span class="sd">            display_visuals: bool</span>
<span class="sd">                Boolean value to whether or not to display visualizations.</span>

<span class="sd">            display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">            filename: string</span>
<span class="sd">                If set to &#39;None&#39; will default to a pre-defined string;</span>
<span class="sd">                unless it is set to an actual filename.</span>

<span class="sd">            sub_dir: string</span>
<span class="sd">                Specify the sub directory to append to the pre-defined folder path.</span>

<span class="sd">            save_file: bool</span>
<span class="sd">                Boolean value to whether or not to save the file.</span>

<span class="sd">            dataframe_snapshot: bool</span>
<span class="sd">                Boolean value to determine whether or not generate and compare a</span>
<span class="sd">                snapshot of the dataframe in the dataset&#39;s directory structure.</span>
<span class="sd">                Helps ensure that data generated in that directory is correctly</span>
<span class="sd">                associated to a dataframe.</span>

<span class="sd">            suppress_runtime_errors: bool</span>
<span class="sd">                If set to true; when generating any graphs will suppress any runtime</span>
<span class="sd">                errors so the program can keep running.</span>

<span class="sd">            display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">            figsize: tuple</span>
<span class="sd">                Tuple object to represent the plot/image&#39;s size.</span>

<span class="sd">            palette: dict or string</span>
<span class="sd">                Dictionary of all feature values to hex color values.</span>

<span class="sd">        Note -</span>
<span class="sd">            A large part of this was taken from: http://tinyurl.com/tuou2cn</span>

<span class="sd">        Raises:</span>
<span class="sd">           Raises error if the feature data is filled with only nulls or if</span>
<span class="sd">           the json file&#39;s snapshot of the given dataframe doesn&#39;t match the</span>
<span class="sd">           given dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>

            <span class="c1"># -----</span>
            <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">feature_name</span><span class="p">)</span>

            <span class="c1"># -----</span>
            <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">other_feature_name</span><span class="p">)</span>

            <span class="c1"># Error check on null data</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span>
                    <span class="s2">&quot;Ridge plot graph couldn&#39;t be generated because &quot;</span> <span class="o">+</span>
                    <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{feature_name}</span><span class="s2">!&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">other_feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span>
                    <span class="s2">&quot;Ridge plot graph couldn&#39;t be generated because &quot;</span> <span class="o">+</span>
                    <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{other_feature_name}</span><span class="s2">!&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Ridge plot graph on </span><span class="si">{feature_name}</span><span class="s2"> by </span><span class="si">{other_feature_name}</span><span class="s2">.&quot;</span><span class="p">)</span>

            <span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
                    <span class="n">rc</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;axes.facecolor&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)})</span>

            <span class="c1"># Temporarily turn off chained assignments</span>
            <span class="n">chained_assignment</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">chained_assignment</span>
            <span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">chained_assignment</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">tmp_df</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="n">feature_name</span><span class="p">,</span><span class="n">other_feature_name</span><span class="p">]])</span>
            <span class="n">tmp_df</span><span class="p">[</span><span class="n">other_feature_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">tmp_df</span><span class="p">[</span><span class="n">other_feature_name</span><span class="p">],</span>
                                                       <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>

            <span class="c1"># if feature_name in self.__df_features.bool_features():</span>
            <span class="c1">#</span>
            <span class="c1">#     tmp_df[feature_name] = pd.to_numeric(tmp_df[feature_name],</span>
            <span class="c1">#                                          errors=&#39;ignore&#39;)</span>
            <span class="c1">#     tmp_df[feature_name] = [&#39;True&#39; if val == 1 else &#39;False&#39;</span>
            <span class="c1">#                               if val == 0 else val</span>
            <span class="c1">#                             for val in tmp_df[feature_name]]</span>

            <span class="n">tmp_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="c1"># Remove any values that only return a single value back</span>
            <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">tmp_df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>

                <span class="n">feature_value_counts</span> <span class="o">=</span> <span class="n">tmp_df</span><span class="p">[</span><span class="n">other_feature_name</span><span class="p">][</span><span class="n">tmp_df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">val</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>

                <span class="n">count_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">feature_value_counts</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">feature_value_counts</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_list</span><span class="p">())</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">count_length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">tmp_df</span> <span class="o">=</span> <span class="n">tmp_df</span><span class="p">[</span><span class="n">tmp_df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span> <span class="o">!=</span> <span class="n">val</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">count_length</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">feature_value_counts</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">tmp_df</span> <span class="o">=</span> <span class="n">tmp_df</span><span class="p">[</span><span class="n">tmp_df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span> <span class="o">!=</span> <span class="n">val</span><span class="p">]</span>

            <span class="c1"># -----</span>
            <span class="c1"># for val in tmp_df[other_feature_name].dropna().unique():</span>
            <span class="c1">#</span>
            <span class="c1">#     feature_value_counts = tmp_df[feature_name][tmp_df[other_feature_name] == val].dropna().value_counts()</span>
            <span class="c1">#</span>
            <span class="c1">#     count_length = len(feature_value_counts.values)</span>
            <span class="c1">#     if len(feature_value_counts.index.to_list()) &lt;= 1 or count_length == 0:</span>
            <span class="c1">#         tmp_df = tmp_df[tmp_df[other_feature_name] != val]</span>
            <span class="c1">#     elif count_length == 1 and feature_value_counts.values[0] == 1:</span>
            <span class="c1">#         tmp_df = tmp_df[tmp_df[other_feature_name] != val]</span>

            <span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">chained_assignment</span> <span class="o">=</span> <span class="n">chained_assignment</span>
            <span class="k">del</span> <span class="n">chained_assignment</span>

            <span class="c1"># # Sort by dataframe&#39;s series of &#39;feature_name&#39;</span>
            <span class="c1"># tmp_df[feature_name], tmp_df[other_feature_name] = self.__sort_two_lists(tmp_df[feature_name],</span>
            <span class="c1">#                                                                          tmp_df[other_feature_name])</span>

            <span class="c1"># Suppress any warnings that the seaborn&#39;s backend raises</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
            <span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
                    <span class="n">rc</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;axes.facecolor&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)})</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">palette</span><span class="p">:</span>
                <span class="n">palette</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">cubehelix_palette</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">rot</span><span class="o">=-.</span><span class="mi">20</span><span class="p">,</span> <span class="n">light</span><span class="o">=.</span><span class="mi">7</span><span class="p">)</span>

            <span class="c1"># Initialize the FacetGrid object</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">tmp_df</span><span class="p">,</span>
                              <span class="n">row</span><span class="o">=</span><span class="n">feature_name</span><span class="p">,</span>
                              <span class="n">hue</span><span class="o">=</span><span class="n">feature_name</span><span class="p">,</span>
                              <span class="n">aspect</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
                              <span class="n">height</span><span class="o">=.</span><span class="mi">4</span><span class="p">,</span>
                              <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">)</span>

            <span class="c1"># Draw the densities in a few steps</span>
            <span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">,</span>
                  <span class="n">other_feature_name</span><span class="p">,</span>
                  <span class="n">clip_on</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                  <span class="n">shade</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                  <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                  <span class="n">lw</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
                  <span class="n">bw</span><span class="o">=.</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">,</span>
                  <span class="n">other_feature_name</span><span class="p">,</span>
                  <span class="n">clip_on</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                  <span class="n">color</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span>
                  <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                  <span class="n">bw</span><span class="o">=.</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">,</span>
                  <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                  <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                  <span class="n">clip_on</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Define and use a simple function to label the plot in axes coordinates</span>
            <span class="k">def</span> <span class="nf">label</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
                <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">-.</span><span class="mi">1</span><span class="p">,</span>
                        <span class="o">.</span><span class="mi">2</span><span class="p">,</span>
                        <span class="n">label</span><span class="p">,</span>
                        <span class="n">fontweight</span><span class="o">=</span><span class="s2">&quot;bold&quot;</span><span class="p">,</span>
                        <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
                        <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
                        <span class="n">va</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                        <span class="n">transform</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>

            <span class="n">g</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">other_feature_name</span><span class="p">)</span>

            <span class="c1"># Set the subplots to overlap</span>
            <span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=-.</span><span class="mi">25</span><span class="p">)</span>

            <span class="c1"># Remove axes details that don&#39;t play well with overlap</span>
            <span class="n">g</span><span class="o">.</span><span class="n">set_titles</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">yticks</span><span class="o">=</span><span class="p">[])</span>
            <span class="n">g</span><span class="o">.</span><span class="n">despine</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="n">figsize</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">figsize</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">forward</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{feature_name}</span><span class="s1"> by </span><span class="si">{other_feature_name}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>

            <span class="c1"># Pass a default name if needed</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Ridge plot graph on </span><span class="si">{feature_name}</span><span class="s2"> by </span><span class="si">{other_feature_name}</span><span class="s2">&quot;</span>

            <span class="c1"># Create string sub directory path</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">sub_dir</span><span class="p">:</span>
                <span class="n">sub_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">/</span><span class="si">{feature_name}</span><span class="s2">&quot;</span>

            <span class="c1"># -----</span>
            <span class="k">if</span> <span class="n">save_file</span><span class="p">:</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">:</span>
                    <span class="n">dataframe_snapshot</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__notebook_mode</span> <span class="ow">and</span> <span class="n">display_visuals</span><span class="p">:</span>
                    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">save_plot</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
                               <span class="n">df_features</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                               <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                               <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                               <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                               <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                               <span class="n">meta_data</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">SnapshotMismatchError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">suppress_runtime_errors</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Plot ridge graph raised an error on feature &#39;</span><span class="si">{feature_name}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="s2">{str(e)}&quot;</span><span class="p">,</span>
                    <span class="ne">RuntimeWarning</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">e</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="FeatureAnalysis.plot_multi_bar_graph"><a class="viewcode-back" href="../../../_autosummary_old/eflow.data_analysis.feature_analysis.html#eflow.data_analysis.feature_analysis.FeatureAnalysis.plot_multi_bar_graph">[docs]</a>    <span class="k">def</span> <span class="nf">plot_multi_bar_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">df</span><span class="p">,</span>
                             <span class="n">feature_name</span><span class="p">,</span>
                             <span class="n">dataset_name</span><span class="p">,</span>
                             <span class="n">other_feature_name</span><span class="p">,</span>
                             <span class="n">display_visuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">display_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">sub_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">save_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">figsize</span><span class="o">=</span><span class="n">GRAPH_DEFAULTS</span><span class="o">.</span><span class="n">FIGSIZE</span><span class="p">,</span>
                             <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">stacked</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Display a pie graph and save the graph in the correct directory.</span>

<span class="sd">        Args:</span>
<span class="sd">           df:</span>
<span class="sd">               Pandas DataFrame object.</span>

<span class="sd">           feature_name:</span>
<span class="sd">               Specified feature column name.</span>

<span class="sd">           dataset_name:</span>
<span class="sd">               The dataset&#39;s name; this will create a sub-directory in which your</span>
<span class="sd">               generated graph will be inner-nested in.</span>

<span class="sd">           display_visuals:</span>
<span class="sd">               Boolean value to whether or not to display visualizations.</span>

<span class="sd">           display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">           filename:</span>
<span class="sd">               If set to &#39;None&#39; will default to a pre-defined string;</span>
<span class="sd">               unless it is set to an actual filename.</span>

<span class="sd">           sub_dir:</span>
<span class="sd">               Specify the sub directory to append to the pre-defined folder path.</span>

<span class="sd">           save_file:</span>
<span class="sd">               Boolean value to whether or not to save the file.</span>

<span class="sd">           dataframe_snapshot:</span>
<span class="sd">                Boolean value to determine whether or not generate and compare a</span>
<span class="sd">                snapshot of the dataframe in the dataset&#39;s directory structure.</span>
<span class="sd">                Helps ensure that data generated in that directory is correctly</span>
<span class="sd">                associated to a dataframe.</span>

<span class="sd">           suppress_runtime_errors: bool</span>
<span class="sd">                If set to true; when generating any graphs will suppress any runtime</span>
<span class="sd">                errors so the program can keep running.</span>

<span class="sd">           figsize: tuple</span>
<span class="sd">                Size of the plot.</span>

<span class="sd">           colors: dict or string</span>
<span class="sd">                Dictionary of all feature values to hex color values.</span>

<span class="sd">           stacked: bool</span>
<span class="sd">                Determines if the multi bar graph should be stacked or not.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Raises error if the feature data is filled with only nulls or if</span>
<span class="sd">            the json file&#39;s snapshot of the given dataframe doesn&#39;t match the</span>
<span class="sd">            given dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>

            <span class="c1"># -----</span>
            <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">feature_name</span><span class="p">)</span>

            <span class="c1"># -----</span>
            <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">other_feature_name</span><span class="p">)</span>


            <span class="c1"># Error check on nan data</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span><span class="s2">&quot;Multi bar graph on &quot;</span> <span class="o">+</span>
                      <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{feature_name}</span><span class="s2">!&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">other_feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span><span class="s2">&quot;Multi bar graph on &quot;</span> <span class="o">+</span>
                                             <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{other_feature_name}</span><span class="s2">!&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Multi bar graph on </span><span class="si">{feature_name}</span><span class="s2"> by </span><span class="si">{other_feature_name}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Closes up any past graph info</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>


            <span class="k">if</span> <span class="ow">not</span> <span class="n">colors</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">get_feature_colors</span><span class="p">(</span><span class="n">feature_name</span><span class="p">)[</span><span class="n">val</span><span class="p">]</span>
                              <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>
                            <span class="p">[</span><span class="n">other_feature_name</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span><span class="o">.</span><span class="n">columns</span><span class="p">)]</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>

            <span class="n">g</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="n">other_feature_name</span><span class="p">,</span> <span class="n">feature_name</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span>
                <span class="n">stacked</span><span class="o">=</span><span class="n">stacked</span><span class="p">,</span>
                <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
                <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper center&#39;</span><span class="p">,</span>
                     <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.07</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                     <span class="n">shadow</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                     <span class="n">ncol</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;whitegrid&quot;</span><span class="p">)</span>

            <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Multi bar graph on </span><span class="si">{feature_name}</span><span class="s2"> by </span><span class="si">{other_feature_name}</span><span class="s2">&quot;</span><span class="p">)</span>


            <span class="c1"># Pass a default name if needed</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">stacked</span><span class="p">:</span>
                    <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Multi bar graph on </span><span class="si">{feature_name}</span><span class="s2"> by </span><span class="si">{other_feature_name}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Multi bar graph stacked on </span><span class="si">{feature_name}</span><span class="s2"> by </span><span class="si">{other_feature_name}</span><span class="s2">&quot;</span>


            <span class="c1"># Create string sub directory path</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">sub_dir</span><span class="p">:</span>
                <span class="n">sub_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">/</span><span class="si">{feature_name}</span><span class="s2">&quot;</span>

            <span class="c1"># -----</span>
            <span class="k">if</span> <span class="n">save_file</span><span class="p">:</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">:</span>
                    <span class="n">dataframe_snapshot</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">save_plot</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
                               <span class="n">df_features</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                               <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                               <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                               <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                               <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                               <span class="n">meta_data</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__notebook_mode</span> <span class="ow">and</span> <span class="n">display_visuals</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">except</span> <span class="n">SnapshotMismatchError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">suppress_runtime_errors</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Multi bar raised an error on feature &#39;</span><span class="si">{feature_name}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="s2">{str(e)}&quot;</span><span class="p">,</span>
                    <span class="ne">RuntimeWarning</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">e</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="FeatureAnalysis.statistical_analysis_on_aggregates"><a class="viewcode-back" href="../../../_autosummary_old/eflow.data_analysis.feature_analysis.html#eflow.data_analysis.feature_analysis.FeatureAnalysis.statistical_analysis_on_aggregates">[docs]</a>    <span class="k">def</span> <span class="nf">statistical_analysis_on_aggregates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                           <span class="n">df</span><span class="p">,</span>
                                           <span class="n">target_features</span><span class="p">,</span>
                                           <span class="n">dataset_name</span><span class="p">,</span>
                                           <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Aggregates the data of the target feature either by discrete values</span>
<span class="sd">            or by binning/labeling continuous data.</span>

<span class="sd">        Args:</span>
<span class="sd">           df: pd.Dataframe</span>
<span class="sd">               Pandas DataFrame object.</span>

<span class="sd">           target_features: list of string</span>
<span class="sd">               Specified target features.</span>

<span class="sd">           dataset_name: string</span>
<span class="sd">               The dataset&#39;s name; this will create a sub-directory in which your</span>
<span class="sd">               generated graph will be inner-nested in.</span>

<span class="sd">           dataframe_snapshot: bool</span>
<span class="sd">                Boolean value to determine whether or not generate and compare a</span>
<span class="sd">                snapshot of the dataframe in the dataset&#39;s directory structure.</span>
<span class="sd">                Helps ensure that data generated in that directory is correctly</span>
<span class="sd">                associated to a dataframe.</span>

<span class="sd">        Note:</span>
<span class="sd">            This function has a lot going on and it&#39;s infancy so I am going to</span>
<span class="sd">            purposely not give it suppress_runtime_errors so people will find</span>
<span class="sd">            problems with it and report it to me.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Raises error if the feature data is filled with only nulls or if</span>
<span class="sd">            the json file&#39;s snapshot of the given dataframe doesn&#39;t match the</span>
<span class="sd">            given dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span> <span class="ow">and</span> <span class="n">dataframe_snapshot</span><span class="p">:</span>
            <span class="n">df_snapshot</span> <span class="o">=</span> <span class="n">DataFrameSnapshot</span><span class="p">()</span>
            <span class="n">df_snapshot</span><span class="o">.</span><span class="n">check_create_snapshot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                                              <span class="n">directory_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;/</span><span class="si">{dataset_name}</span><span class="s2">&quot;</span><span class="p">,</span>
                                              <span class="n">sub_dir</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">/_Extras&quot;</span><span class="p">)</span>

        <span class="n">feature_stats_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>


        <span class="c1"># Convert to list of the given string</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target_features</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">target_features</span> <span class="o">=</span> <span class="p">[</span><span class="n">target_features</span><span class="p">]</span>

        <span class="c1"># Iterate through all target features features</span>
        <span class="k">for</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="n">target_features</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">feature_name</span><span class="p">:</span>
                <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                        <span class="n">feature_name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Generate bins and labels for continuous numerical data</span>
            <span class="n">bins</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">continuous_numerical_features</span><span class="p">():</span>
                <span class="n">bins</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">auto_binning</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                                            <span class="n">feature_name</span><span class="p">)</span>

            <span class="c1"># Labels and bins will act as feature values for aggregation</span>
            <span class="k">if</span> <span class="n">labels</span><span class="p">:</span>
                <span class="n">feature_values</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">feature_values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span>
                    <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>

            <span class="c1"># Label to compare to all the data without any aggregations</span>
            <span class="n">feature_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;All&quot;</span><span class="p">)</span>

            <span class="c1"># Copy feature values to remove one given value from the feature list at a time</span>
            <span class="n">other_feature_values</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">feature_values</span><span class="p">)</span>

            <span class="c1"># Create target feature dict</span>
            <span class="n">feature_stats_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="n">feature_val_count</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="n">feature_pvalues</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

            <span class="c1"># Store all pvalues found for every feature</span>
            <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>

                <span class="k">if</span> <span class="n">feature_name</span> <span class="o">==</span> <span class="n">column</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">feature_pvalues</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

            <span class="c1"># Iterate through remaining features</span>
            <span class="k">for</span> <span class="n">main_feature_val</span> <span class="ow">in</span> <span class="n">feature_values</span><span class="p">:</span>

                <span class="c1"># Ignore &quot;All&quot; for the main feature val since it doesn&#39;t actually exist</span>
                <span class="k">if</span> <span class="n">main_feature_val</span> <span class="o">==</span> <span class="s2">&quot;All&quot;</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="c1"># Don&#39;t want repeats or compare same subsets</span>
                <span class="n">other_feature_values</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">main_feature_val</span><span class="p">)</span>
                <span class="n">feature_val_count</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="c1"># Create series objects based on the main feature val compared to the other_feature_val</span>
                <span class="n">other_feature_val_count</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">other_feature_val</span> <span class="ow">in</span> <span class="n">other_feature_values</span><span class="p">:</span>
                    <span class="n">feature_stats_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{main_feature_val}</span><span class="s2"> -&gt; </span><span class="si">{other_feature_val}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

                    <span class="c1"># Generate series object based on bins/discrete values</span>
                    <span class="n">other_feature_val_count</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">for</span> <span class="n">iterate_feature_name</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>

                        <span class="c1"># -----</span>
                        <span class="k">if</span> <span class="n">iterate_feature_name</span> <span class="o">==</span> <span class="n">feature_name</span><span class="p">:</span>
                            <span class="k">continue</span>

                        <span class="c1"># Create bool array for series object(left)</span>
                        <span class="k">if</span> <span class="n">labels</span><span class="p">:</span>
                            <span class="n">bool_array</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">bins</span><span class="p">[</span>
                                <span class="n">feature_val_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span>
                                                     <span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">bins</span><span class="p">[</span>
                                                 <span class="n">feature_val_count</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">bool_array</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">main_feature_val</span>

                        <span class="n">tmp_series_a</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">bool_array</span><span class="p">][</span>
                            <span class="n">iterate_feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
                        <span class="k">del</span> <span class="n">bool_array</span>

                        <span class="c1"># Create bool array for series object(right)</span>
                        <span class="k">if</span> <span class="n">other_feature_val</span> <span class="o">==</span> <span class="s2">&quot;All&quot;</span><span class="p">:</span>
                            <span class="n">bool_array</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">labels</span><span class="p">:</span>
                                <span class="n">bool_array</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">bins</span><span class="p">[</span>
                                    <span class="n">feature_val_count</span> <span class="o">+</span> <span class="n">other_feature_val_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span>
                                                     <span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">bins</span><span class="p">[</span>
                                                 <span class="n">feature_val_count</span> <span class="o">+</span> <span class="n">other_feature_val_count</span><span class="p">])</span>

                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">bool_array</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span>
                                                 <span class="n">feature_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">other_feature_val</span>

                        <span class="n">tmp_series_b</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">bool_array</span><span class="p">][</span>
                            <span class="n">iterate_feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
                        <span class="k">del</span> <span class="n">bool_array</span>

                        <span class="c1"># Extract out pvalue/statistic based on series data</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tmp_series_a</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">tmp_series_b</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">pvalue</span> <span class="o">=</span> <span class="s2">&quot;NaN&quot;</span>
                            <span class="n">statistic</span> <span class="o">=</span> <span class="s2">&quot;NaN&quot;</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">ks_2samp</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">ks_2samp</span><span class="p">(</span><span class="n">tmp_series_a</span><span class="p">,</span>
                                                      <span class="n">tmp_series_b</span><span class="p">)</span>
                            <span class="n">pvalue</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">ks_2samp</span><span class="o">.</span><span class="n">pvalue</span><span class="p">)</span>
                            <span class="n">statistic</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">ks_2samp</span><span class="o">.</span><span class="n">statistic</span><span class="p">)</span>

                        <span class="c1"># Init pvalue/statistic to proper values</span>
                        <span class="n">feature_stats_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{main_feature_val}</span><span class="s2"> -&gt; </span><span class="si">{other_feature_val}</span><span class="s2">&quot;</span><span class="p">][</span>
                            <span class="n">iterate_feature_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
                        <span class="n">feature_stats_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{main_feature_val}</span><span class="s2"> -&gt; </span><span class="si">{other_feature_val}</span><span class="s2">&quot;</span><span class="p">][</span>
                            <span class="n">iterate_feature_name</span><span class="p">][</span>
                            <span class="s2">&quot;Kolmogorov-Smirnov statistic&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
                        <span class="n">feature_stats_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{main_feature_val}</span><span class="s2"> -&gt; </span><span class="si">{other_feature_val}</span><span class="s2">&quot;</span><span class="p">][</span>
                            <span class="n">iterate_feature_name</span><span class="p">][</span>
                            <span class="s2">&quot;Kolmogorov-Smirnov statistic&quot;</span><span class="p">][</span><span class="s2">&quot;P-Value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pvalue</span>

                        <span class="n">feature_stats_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{main_feature_val}</span><span class="s2"> -&gt; </span><span class="si">{other_feature_val}</span><span class="s2">&quot;</span><span class="p">][</span>
                            <span class="n">iterate_feature_name</span><span class="p">][</span>
                            <span class="s2">&quot;Kolmogorov-Smirnov statistic&quot;</span><span class="p">][</span>
                            <span class="s2">&quot;Statistic&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">statistic</span>

                        <span class="c1"># Don&#39;t add to list</span>
                        <span class="k">if</span> <span class="n">pvalue</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span><span class="p">:</span>
                            <span class="k">continue</span>

                        <span class="c1"># Init dict/list if it doesn&#39;t exist</span>
                        <span class="k">if</span> <span class="s2">&quot;Kolmogorov-Smirnov statistic&quot;</span> <span class="ow">not</span> <span class="ow">in</span> \
                                <span class="n">feature_pvalues</span><span class="p">[</span><span class="n">iterate_feature_name</span><span class="p">]:</span>
                            <span class="n">feature_pvalues</span><span class="p">[</span><span class="n">iterate_feature_name</span><span class="p">][</span>
                                <span class="s2">&quot;Kolmogorov-Smirnov statistic&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
                            <span class="n">feature_pvalues</span><span class="p">[</span><span class="n">iterate_feature_name</span><span class="p">][</span>
                                <span class="s2">&quot;Kolmogorov-Smirnov statistic&quot;</span><span class="p">][</span>
                                <span class="s2">&quot;All pvalues&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

                        <span class="c1"># Append new pvalue</span>
                        <span class="n">feature_pvalues</span><span class="p">[</span><span class="n">iterate_feature_name</span><span class="p">][</span>
                            <span class="s2">&quot;Kolmogorov-Smirnov statistic&quot;</span><span class="p">][</span>
                            <span class="s2">&quot;All pvalues&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pvalue</span><span class="p">)</span>

            <span class="c1"># Generate summary data of pvalues</span>
            <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">column</span> <span class="o">==</span> <span class="n">feature_name</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">feature_pvalues</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">feature_pvalues</span><span class="p">:</span>
                        <span class="n">feature_pvalues</span><span class="p">[</span><span class="n">column</span><span class="p">][</span>
                            <span class="s2">&quot;Kolmogorov-Smirnov statistic&quot;</span><span class="p">][</span>
                            <span class="s2">&quot;All pvalues&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

                        <span class="c1"># Only create summary if the series is at least the of 2</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">feature_pvalues</span><span class="p">[</span><span class="n">column</span><span class="p">][</span>
                                   <span class="s2">&quot;Kolmogorov-Smirnov statistic&quot;</span><span class="p">][</span>
                                   <span class="s2">&quot;All pvalues&quot;</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>

                            <span class="n">feature_pvalues</span><span class="p">[</span><span class="n">column</span><span class="p">][</span>
                                <span class="s2">&quot;Kolmogorov-Smirnov statistic&quot;</span>
                            <span class="p">][</span><span class="s2">&quot;Pvalues Summary&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">descr_table</span><span class="p">(</span>
                                <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">column</span><span class="p">:</span> <span class="n">feature_pvalues</span><span class="p">[</span><span class="n">column</span><span class="p">][</span>
                                    <span class="s2">&quot;Kolmogorov-Smirnov statistic&quot;</span><span class="p">][</span>
                                    <span class="s2">&quot;All pvalues&quot;</span><span class="p">]}),</span>
                                <span class="n">column</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()[</span><span class="n">column</span><span class="p">]</span>
                        <span class="c1"># Init to an empty dict</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">feature_pvalues</span><span class="p">[</span><span class="n">column</span><span class="p">][</span>
                                <span class="s2">&quot;Kolmogorov-Smirnov statistic&quot;</span><span class="p">][</span>
                                <span class="s2">&quot;Pvalues Summary&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="n">feature_stats_dict</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span><span class="s2">&quot;P-Values&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">feature_pvalues</span>
        <span class="c1"># End target feature loop</span>

        <span class="c1"># Generate directories</span>
        <span class="n">create_dir_structure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span> <span class="o">+</span> <span class="n">dataset_name</span><span class="p">,</span>
                             <span class="s2">&quot;_Extras/Statistics/Accept Null Hypothesis&quot;</span><span class="p">)</span>
        <span class="n">create_dir_structure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span> <span class="o">+</span> <span class="n">dataset_name</span><span class="p">,</span>
                             <span class="s2">&quot;_Extras/Statistics/Reject Null Hypothesis&quot;</span><span class="p">)</span>

        <span class="c1"># Create json file</span>
        <span class="n">dict_to_json_file</span><span class="p">(</span><span class="n">feature_stats_dict</span><span class="p">,</span>
                          <span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span> <span class="o">+</span> <span class="n">dataset_name</span> <span class="o">+</span> <span class="s2">&quot;/_Extras/Statistics&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;Statistics on target features&quot;</span><span class="p">)</span>

        <span class="n">stat_methods_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">main_feature</span><span class="p">,</span> <span class="n">relationship_dict</span> <span class="ow">in</span> <span class="n">feature_stats_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">stats_on_features</span> <span class="ow">in</span> <span class="n">relationship_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">iterate_feature_name</span><span class="p">,</span> <span class="n">stats_method_dict</span> <span class="ow">in</span> <span class="n">stats_on_features</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">for</span> <span class="n">stats_method</span><span class="p">,</span> <span class="n">stats_dict</span> <span class="ow">in</span> <span class="n">stats_method_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="s2">&quot;All pvalues&quot;</span> <span class="ow">in</span> <span class="n">stats_dict</span><span class="p">:</span>

                            <span class="k">if</span> <span class="n">stats_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stat_methods_dict</span><span class="p">:</span>
                                <span class="n">stat_methods_dict</span><span class="p">[</span><span class="n">stats_method</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

                            <span class="n">stats_dict</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">stats_dict</span><span class="p">)</span>

                            <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">stats_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                                <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span><span class="p">:</span>
                                    <span class="n">stats_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">stats_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span>

                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">stats_dict</span><span class="p">[</span><span class="s1">&#39;Pvalues Summary&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">tmp_stats_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">stats_dict</span><span class="p">[</span><span class="s2">&quot;Pvalues Summary&quot;</span><span class="p">])[[</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span><span class="s2">&quot;std&quot;</span><span class="p">,</span><span class="s2">&quot;var&quot;</span><span class="p">]]</span>
                                <span class="n">tmp_stats_df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{main_feature}</span><span class="s2"> compared to </span><span class="si">{iterate_feature_name}</span><span class="s2">&quot;</span><span class="p">]</span>
                                <span class="n">stat_methods_dict</span><span class="p">[</span><span class="n">stats_method</span><span class="p">]</span> <span class="o">=</span> <span class="n">stat_methods_dict</span><span class="p">[</span><span class="n">stats_method</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmp_stats_df</span><span class="p">,</span>
                                                                                           <span class="n">ignore_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">stats_method</span> <span class="ow">in</span> <span class="n">stat_methods_dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stat_methods_dict</span><span class="p">[</span><span class="n">stats_method</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">stat_methods_dict</span><span class="p">[</span><span class="n">stats_method</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span>
                    <span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="s2">&quot;var&quot;</span><span class="p">],</span>
                    <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">pickle_object_to_file</span><span class="p">(</span><span class="n">stat_methods_dict</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span> <span class="o">+</span> <span class="n">dataset_name</span> <span class="o">+</span> <span class="s2">&quot;/_Extras/Statistics&quot;</span><span class="p">,</span>
                              <span class="s2">&quot;Stat methods of features dataframes&quot;</span><span class="p">,</span>
                              <span class="n">remove_file_extension</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Generate multiple json files based on the following pvalues</span>
        <span class="k">for</span> <span class="n">accept_null_plvalue</span> <span class="ow">in</span> <span class="p">[</span><span class="o">.</span><span class="mi">01</span><span class="p">,</span> <span class="o">.</span><span class="mi">05</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">101</span><span class="p">,</span> <span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="o">.</span><span class="mi">3</span><span class="p">,</span> <span class="o">.</span><span class="mi">4</span><span class="p">,</span> <span class="o">.</span><span class="mi">5</span><span class="p">,</span> <span class="o">.</span><span class="mi">6</span><span class="p">,</span> <span class="o">.</span><span class="mi">7</span><span class="p">,</span>
                                    <span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="o">.</span><span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">]:</span>
            <span class="n">json_dict</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">feature_stats_dict</span><span class="p">)</span>
            <span class="n">tmp_dict</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">feature_stats_dict</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">main_feature</span><span class="p">,</span> <span class="n">relationship_dict</span> <span class="ow">in</span> <span class="n">tmp_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">relationship_string</span><span class="p">,</span> <span class="n">stats_on_features</span> <span class="ow">in</span> <span class="n">relationship_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">for</span> <span class="n">iterate_feature_name</span><span class="p">,</span> <span class="n">stats_method_dict</span> <span class="ow">in</span> <span class="n">stats_on_features</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">for</span> <span class="n">stats_method</span><span class="p">,</span> <span class="n">stats_dict</span> <span class="ow">in</span> <span class="n">stats_method_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                            <span class="c1"># Not a relationship string; Re-access pvalue list and summary</span>
                            <span class="k">if</span> <span class="n">relationship_string</span> <span class="o">==</span> <span class="s2">&quot;P-Values&quot;</span><span class="p">:</span>

                                <span class="k">if</span> <span class="s2">&quot;P-Values&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">json_dict</span><span class="p">[</span>
                                    <span class="n">main_feature</span><span class="p">]</span> <span class="ow">or</span> <span class="n">iterate_feature_name</span> <span class="ow">not</span> <span class="ow">in</span> \
                                        <span class="n">json_dict</span><span class="p">[</span><span class="n">main_feature</span><span class="p">][</span><span class="s2">&quot;P-Values&quot;</span><span class="p">]:</span>
                                    <span class="k">break</span>

                                <span class="n">filter_pvalues</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span>
                                    <span class="n">json_dict</span><span class="p">[</span><span class="n">main_feature</span><span class="p">][</span><span class="s2">&quot;P-Values&quot;</span><span class="p">][</span>
                                        <span class="n">iterate_feature_name</span><span class="p">][</span><span class="n">stats_method</span><span class="p">][</span>
                                        <span class="s2">&quot;All pvalues&quot;</span><span class="p">])</span>

                                <span class="k">if</span> <span class="n">accept_null_plvalue</span> <span class="o">&lt;=</span> <span class="o">.</span><span class="mi">1</span><span class="p">:</span>
                                    <span class="n">filter_pvalues</span> <span class="o">=</span> <span class="n">filter_pvalues</span><span class="p">[</span>
                                        <span class="n">filter_pvalues</span> <span class="o">&lt;=</span> <span class="n">accept_null_plvalue</span><span class="p">]</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">filter_pvalues</span> <span class="o">=</span> <span class="n">filter_pvalues</span><span class="p">[</span>
                                        <span class="n">filter_pvalues</span> <span class="o">&gt;=</span> <span class="n">accept_null_plvalue</span><span class="p">]</span>

                                <span class="n">json_dict</span><span class="p">[</span><span class="n">main_feature</span><span class="p">][</span><span class="s2">&quot;P-Values&quot;</span><span class="p">][</span>
                                    <span class="n">iterate_feature_name</span><span class="p">][</span><span class="n">stats_method</span><span class="p">][</span>
                                    <span class="s2">&quot;All pvalues&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">filter_pvalues</span><span class="p">)</span>

                                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_pvalues</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
                                    <span class="n">json_dict</span><span class="p">[</span><span class="n">main_feature</span><span class="p">][</span>
                                        <span class="s2">&quot;P-Values&quot;</span><span class="p">][</span><span class="n">iterate_feature_name</span><span class="p">][</span>
                                        <span class="n">stats_method</span><span class="p">][</span><span class="s2">&quot;Pvalues Summary&quot;</span><span class="p">]</span> <span class="o">=</span> \
                                    <span class="n">descr_table</span><span class="p">(</span>
                                        <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
                                            <span class="p">{</span><span class="n">iterate_feature_name</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span>
                                                <span class="n">filter_pvalues</span><span class="p">)}),</span>
                                        <span class="n">iterate_feature_name</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()[</span>
                                        <span class="n">iterate_feature_name</span><span class="p">]</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">json_dict</span><span class="p">[</span><span class="n">main_feature</span><span class="p">][</span>
                                        <span class="s2">&quot;P-Values&quot;</span><span class="p">][</span><span class="n">iterate_feature_name</span><span class="p">][</span>
                                        <span class="n">stats_method</span><span class="p">][</span><span class="s2">&quot;Pvalues Summary&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

                                <span class="k">break</span>

                            <span class="n">pvalue</span> <span class="o">=</span> <span class="n">stats_dict</span><span class="p">[</span><span class="s2">&quot;P-Value&quot;</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">accept_null_plvalue</span> <span class="o">&lt;=</span> <span class="o">.</span><span class="mi">1</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">pvalue</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span> <span class="ow">or</span> <span class="n">pvalue</span> <span class="o">&gt;</span> <span class="n">accept_null_plvalue</span><span class="p">:</span>
                                    <span class="k">del</span> <span class="n">json_dict</span><span class="p">[</span><span class="n">main_feature</span><span class="p">][</span>
                                        <span class="n">relationship_string</span><span class="p">][</span>
                                        <span class="n">iterate_feature_name</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">pvalue</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span> <span class="ow">or</span> <span class="n">pvalue</span> <span class="o">&lt;</span> <span class="n">accept_null_plvalue</span><span class="p">:</span>
                                    <span class="k">del</span> <span class="n">json_dict</span><span class="p">[</span><span class="n">main_feature</span><span class="p">][</span>
                                        <span class="n">relationship_string</span><span class="p">][</span>
                                        <span class="n">iterate_feature_name</span><span class="p">]</span>

            <span class="c1"># Push to accept or reject null hypothesis folder</span>
            <span class="k">if</span> <span class="n">accept_null_plvalue</span> <span class="o">&lt;=</span> <span class="o">.</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">dict_to_json_file</span><span class="p">(</span><span class="n">json_dict</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span> <span class="o">+</span> <span class="n">dataset_name</span> <span class="o">+</span> <span class="s2">&quot;/_Extras/Statistics/Accept Null Hypothesis&quot;</span><span class="p">,</span>
                                  <span class="sa">f</span><span class="s2">&quot;Accept Null Hypothesis on target features where pvalue &lt;= </span><span class="si">{accept_null_plvalue}</span><span class="s2">&quot;</span><span class="p">,</span>
                                  <span class="n">remove_file_extension</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dict_to_json_file</span><span class="p">(</span><span class="n">json_dict</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">folder_path</span> <span class="o">+</span> <span class="n">dataset_name</span> <span class="o">+</span> <span class="s2">&quot;/_Extras/Statistics/Reject Null Hypothesis&quot;</span><span class="p">,</span>
                                  <span class="sa">f</span><span class="s2">&quot;Reject Null Hypothesis on target features where pvalue &gt;= </span><span class="si">{accept_null_plvalue}</span><span class="s2">&quot;</span><span class="p">,</span>
                                  <span class="n">remove_file_extension</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="FeatureAnalysis.plot_jointplot_graph"><a class="viewcode-back" href="../../../_autosummary_old/eflow.data_analysis.feature_analysis.html#eflow.data_analysis.feature_analysis.FeatureAnalysis.plot_jointplot_graph">[docs]</a>    <span class="k">def</span> <span class="nf">plot_jointplot_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">df</span><span class="p">,</span>
                             <span class="n">feature_name</span><span class="p">,</span>
                             <span class="n">dataset_name</span><span class="p">,</span>
                             <span class="n">other_feature_name</span><span class="p">,</span>
                             <span class="n">display_visuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">display_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">sub_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">save_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">figsize</span><span class="o">=</span><span class="n">GRAPH_DEFAULTS</span><span class="o">.</span><span class="n">FIGSIZE</span><span class="p">,</span>
                             <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;scatter and kde&quot;</span><span class="p">,</span>
                             <span class="n">ratio</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Display a ridge plot and save the graph in the correct directory.</span>

<span class="sd">        Args:</span>
<span class="sd">            df: pd.Dataframe</span>
<span class="sd">                Pandas DataFrame object.</span>

<span class="sd">            feature_name: string</span>
<span class="sd">                Specified feature column name.</span>

<span class="sd">            dataset_name: string</span>
<span class="sd">                The dataset&#39;s name; this will create a sub-directory in which your</span>
<span class="sd">                generated graph will be inner-nested in.</span>

<span class="sd">            other_feature_name: string</span>
<span class="sd">                Feature to compare to.</span>

<span class="sd">            display_visuals: bool</span>
<span class="sd">                Boolean value to whether or not to display visualizations.</span>

<span class="sd">            display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">            filename: string</span>
<span class="sd">                If set to &#39;None&#39; will default to a pre-defined string;</span>
<span class="sd">                unless it is set to an actual filename.</span>

<span class="sd">            sub_dir: string</span>
<span class="sd">                Specify the sub directory to append to the pre-defined folder path.</span>

<span class="sd">            save_file: bool</span>
<span class="sd">                Boolean value to whether or not to save the file.</span>

<span class="sd">            dataframe_snapshot: bool</span>
<span class="sd">                Boolean value to determine whether or not generate and compare a</span>
<span class="sd">                snapshot of the dataframe in the dataset&#39;s directory structure.</span>
<span class="sd">                Helps ensure that data generated in that directory is correctly</span>
<span class="sd">                associated to a dataframe.</span>

<span class="sd">            suppress_runtime_errors: bool</span>
<span class="sd">                If set to true; when generating any graphs will suppress any runtime</span>
<span class="sd">                errors so the program can keep running.</span>

<span class="sd">            display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">            figsize: tuple</span>
<span class="sd">                Tuple object to represent the plot/image&#39;s size. Because joinplot</span>
<span class="sd">                only accepts a single value for the figure; we just pull the</span>
<span class="sd">                greatest of the two values.</span>

<span class="sd">            color: string</span>
<span class="sd">                Seaborn/maplotlib color/hex color for representing the graph</span>

<span class="sd">            kind: string (scatter,reg,resid,kde,hex,scatter and kde)</span>
<span class="sd">                Kind of plot to draw.</span>

<span class="sd">            ratio:</span>
<span class="sd">                Ratio of joint axes height to marginal axes height.</span>
<span class="sd">                (Determines distplot like plots dimensions.)</span>

<span class="sd">            Credit to seaborn&#39;s author:</span>
<span class="sd">            Michael Waskom</span>
<span class="sd">            Git username: mwaskom</span>
<span class="sd">            Link: http://tinyurl.com/v9pxsoy</span>

<span class="sd">        Raises:</span>
<span class="sd">           Raises error if the feature data is filled with only nulls or if</span>
<span class="sd">           the json file&#39;s snapshot of the given dataframe doesn&#39;t match the</span>
<span class="sd">           given dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>


        <span class="k">try</span><span class="p">:</span>

            <span class="c1"># -----</span>
            <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">feature_name</span><span class="p">)</span>

            <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">other_feature_name</span><span class="p">)</span>

            <span class="c1"># Error check on null data</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span>
                    <span class="s2">&quot;Jointplot plot graph couldn&#39;t be generated because &quot;</span> <span class="o">+</span>
                    <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{feature_name}</span><span class="s2">!&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">other_feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span>
                    <span class="s2">&quot;Jointplot plot graph couldn&#39;t be generated because &quot;</span> <span class="o">+</span>
                    <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{other_feature_name}</span><span class="s2">!&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generating jointplot graph on </span><span class="si">{feature_name}</span><span class="s2"> by </span><span class="si">{other_feature_name}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Closes up any past graph info</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">figsize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">figsize</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">height</span> <span class="o">=</span> <span class="n">figsize</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">height</span> <span class="o">=</span> <span class="n">figsize</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">tmp_df</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="n">feature_name</span><span class="p">,</span><span class="n">other_feature_name</span><span class="p">]])</span>
            <span class="n">tmp_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">kind</span><span class="p">:</span>
                <span class="n">kind</span> <span class="o">=</span> <span class="s2">&quot;scatter&quot;</span>

            <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;scatter and kde&quot;</span><span class="p">:</span>
                <span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">jointplot</span><span class="p">(</span><span class="n">feature_name</span><span class="p">,</span>
                                  <span class="n">other_feature_name</span><span class="p">,</span>
                                  <span class="n">data</span><span class="o">=</span><span class="n">tmp_df</span><span class="p">,</span>
                                  <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;scatter&quot;</span><span class="p">,</span>
                                  <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
                                  <span class="n">ratio</span><span class="o">=</span><span class="n">ratio</span><span class="p">,</span>
                                  <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span><span class="o">.</span><span class="n">plot_joint</span><span class="p">(</span><span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                                            <span class="n">n_levels</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">jointplot</span><span class="p">(</span><span class="n">feature_name</span><span class="p">,</span>
                                  <span class="n">other_feature_name</span><span class="p">,</span>
                                  <span class="n">data</span><span class="o">=</span><span class="n">tmp_df</span><span class="p">,</span>
                                  <span class="n">kind</span><span class="o">=</span><span class="n">kind</span><span class="p">,</span>
                                  <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
                                  <span class="n">ratio</span><span class="o">=</span><span class="n">ratio</span><span class="p">,</span>
                                  <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>

            <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>

            <span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.93</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Jointplot: &quot;</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{feature_name}</span><span class="s2"> by </span><span class="si">{other_feature_name}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># Pass a default name if needed</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Jointplot plot graph for </span><span class="si">{feature_name}</span><span class="s2"> by </span><span class="si">{other_feature_name}</span><span class="s2"> using </span><span class="si">{kind}</span><span class="s2">&quot;</span>

            <span class="c1"># Create string sub directory path</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">sub_dir</span><span class="p">:</span>
                <span class="n">sub_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">/</span><span class="si">{feature_name}</span><span class="s2">&quot;</span>

            <span class="c1"># -----</span>
            <span class="k">if</span> <span class="n">save_file</span><span class="p">:</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">:</span>
                    <span class="n">dataframe_snapshot</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">save_plot</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
                               <span class="n">df_features</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                               <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                               <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                               <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                               <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                               <span class="n">meta_data</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__notebook_mode</span> <span class="ow">and</span> <span class="n">display_visuals</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">except</span> <span class="n">SnapshotMismatchError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">suppress_runtime_errors</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Joinplot plot graph an error on feature &#39;</span><span class="si">{feature_name}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="s2">{str(e)}&quot;</span><span class="p">,</span>
                    <span class="ne">RuntimeWarning</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">e</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="FeatureAnalysis.value_counts_table"><a class="viewcode-back" href="../../../_autosummary_old/eflow.data_analysis.feature_analysis.html#eflow.data_analysis.feature_analysis.FeatureAnalysis.value_counts_table">[docs]</a>    <span class="k">def</span> <span class="nf">value_counts_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">df</span><span class="p">,</span>
                           <span class="n">feature_name</span><span class="p">,</span>
                           <span class="n">dataset_name</span><span class="p">,</span>
                           <span class="n">display_visuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">display_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">sub_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">save_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Creates a value counts table of the features given data.</span>

<span class="sd">            Note</span>
<span class="sd">                Creates a png of the table.</span>

<span class="sd">        Args:</span>
<span class="sd">            df: pd.Dataframe</span>
<span class="sd">                Pandas DataFrame object</span>

<span class="sd">            feature_name: string</span>
<span class="sd">                Specified feature column name.</span>

<span class="sd">            dataset_name: string</span>
<span class="sd">                The dataset&#39;s name; this will create a sub-directory in which your</span>
<span class="sd">                generated graph will be inner-nested in.</span>

<span class="sd">            display_visuals: bool</span>
<span class="sd">                Boolean value to whether or not to display visualizations.</span>

<span class="sd">            display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">            filename: string</span>
<span class="sd">                If set to &#39;None&#39; will default to a pre-defined string;</span>
<span class="sd">                unless it is set to an actual filename.</span>

<span class="sd">            sub_dir: string</span>
<span class="sd">                Specify the sub directory to append to the pre-defined folder path.</span>

<span class="sd">            save_file: bool</span>
<span class="sd">                Saves file if set to True; doesn&#39;t if set to False.</span>

<span class="sd">            dataframe_snapshot: bool</span>
<span class="sd">                Boolean value to determine whether or not generate and compare a</span>
<span class="sd">                snapshot of the dataframe in the dataset&#39;s directory structure.</span>
<span class="sd">                Helps ensure that data generated in that directory is correctly</span>
<span class="sd">                associated to a dataframe.</span>

<span class="sd">            suppress_runtime_errors: bool</span>
<span class="sd">                If set to true; when generating any graphs will suppress any runtime</span>
<span class="sd">                errors so the program can keep running.</span>


<span class="sd">            Creates/Saves a pandas dataframe of value counts of a dataframe.</span>

<span class="sd">            Note -</span>
<span class="sd">                Creates a png of the table.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Raises error if the feature data is filled with only nulls or if</span>
<span class="sd">            the json file&#39;s snapshot of the given dataframe doesn&#39;t match the</span>
<span class="sd">            given dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>

            <span class="c1"># -----</span>
            <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">feature_name</span><span class="p">)</span>

            <span class="c1"># Check if feature has only null data</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span><span class="s2">&quot;Values count table couldn&#39;t be generated because &quot;</span> <span class="o">+</span>
                                             <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{feature_name}</span><span class="s2">!&quot;</span><span class="p">)</span>


            <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating value counts table for feature </span><span class="si">{feature_name}</span><span class="s2">.&quot;</span><span class="p">)</span>

            <span class="c1"># -----</span>
            <span class="n">val_counts_df</span> <span class="o">=</span> <span class="n">value_counts_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                               <span class="n">feature_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__notebook_mode</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">display_visuals</span><span class="p">:</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">val_counts_df</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">display_visuals</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">val_counts_df</span><span class="p">)</span>

            <span class="c1"># Pass a default name if needed</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{feature_name}</span><span class="s2"> Value Counts Table&quot;</span>

            <span class="c1"># Create string sub directory path</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">sub_dir</span><span class="p">:</span>
                <span class="n">sub_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">/</span><span class="si">{feature_name}</span><span class="s2">&quot;</span>

            <span class="k">if</span> <span class="n">save_file</span><span class="p">:</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">:</span>
                    <span class="n">dataframe_snapshot</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">save_table_as_plot</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
                                        <span class="n">df_features</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                                        <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                                        <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                                        <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                        <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                        <span class="n">table</span><span class="o">=</span><span class="n">val_counts_df</span><span class="p">,</span>
                                        <span class="n">show_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                        <span class="n">meta_data</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">SnapshotMismatchError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">suppress_runtime_errors</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Value count table raised an error on feature &#39;</span><span class="si">{feature_name}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="s2">{str(e)}&quot;</span><span class="p">,</span>
                    <span class="ne">RuntimeWarning</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">e</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="FeatureAnalysis.descr_table"><a class="viewcode-back" href="../../../_autosummary_old/eflow.data_analysis.feature_analysis.html#eflow.data_analysis.feature_analysis.FeatureAnalysis.descr_table">[docs]</a>    <span class="k">def</span> <span class="nf">descr_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                    <span class="n">df</span><span class="p">,</span>
                    <span class="n">feature_name</span><span class="p">,</span>
                    <span class="n">dataset_name</span><span class="p">,</span>
                    <span class="n">display_visuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">display_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">sub_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">save_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Creates/Saves a pandas dataframe of a feature&#39;s numerical data.</span>
<span class="sd">            Standard deviation, mean, Q1-Q5, median, variance, etc.</span>

<span class="sd">            Note</span>
<span class="sd">                Creates a png of the table.</span>

<span class="sd">        Args:</span>
<span class="sd">            df: pd.Dataframe</span>
<span class="sd">                Pandas DataFrame object</span>

<span class="sd">            feature_name: string</span>
<span class="sd">                Specified feature column name.</span>

<span class="sd">            dataset_name: string</span>
<span class="sd">                The dataset&#39;s name; this will create a sub-directory in which your</span>
<span class="sd">                generated graph will be inner-nested in.</span>

<span class="sd">            display_visuals: bool</span>
<span class="sd">                Boolean value to whether or not to display visualizations.</span>

<span class="sd">            display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">            filename: string</span>
<span class="sd">                If set to &#39;None&#39; will default to a pre-defined string;</span>
<span class="sd">                unless it is set to an actual filename.</span>

<span class="sd">            sub_dir: string</span>
<span class="sd">                Specify the sub directory to append to the pre-defined folder path.</span>

<span class="sd">            save_file: bool</span>
<span class="sd">                Saves file if set to True; doesn&#39;t if set to False.</span>

<span class="sd">            dataframe_snapshot: bool</span>
<span class="sd">                Boolean value to determine whether or not generate and compare a</span>
<span class="sd">                snapshot of the dataframe in the dataset&#39;s directory structure.</span>
<span class="sd">                Helps ensure that data generated in that directory is correctly</span>
<span class="sd">                associated to a dataframe.</span>

<span class="sd">            suppress_runtime_errors: bool</span>
<span class="sd">                If set to true; when generating any graphs will suppress any runtime</span>
<span class="sd">                errors so the program can keep running.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Raises error if the feature data is filled with only nulls or if</span>
<span class="sd">            the json file&#39;s snapshot of the given dataframe doesn&#39;t match the</span>
<span class="sd">            given dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>

            <span class="c1"># -----</span>
            <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">feature_name</span><span class="p">)</span>

            <span class="c1"># Check if dataframe has only null data</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span><span class="s2">&quot;Descr table couldn&#39;t be generated because &quot;</span> <span class="o">+</span>
                      <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{feature_name}</span><span class="s2">!&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating data description table for </span><span class="si">{feature_name}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">desc_df</span> <span class="o">=</span> <span class="n">descr_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                  <span class="n">feature_name</span><span class="p">,</span>
                                  <span class="n">to_numeric</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__notebook_mode</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">display_visuals</span><span class="p">:</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">desc_df</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">display_visuals</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">desc_df</span><span class="p">)</span>

            <span class="c1"># Pass a default name if needed</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{feature_name}</span><span class="s2"> Description Table&quot;</span>

            <span class="c1"># Create string sub directory path</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">sub_dir</span><span class="p">:</span>
                <span class="n">sub_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">/</span><span class="si">{feature_name}</span><span class="s2">&quot;</span>

            <span class="k">if</span> <span class="n">save_file</span><span class="p">:</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">:</span>
                    <span class="n">dataframe_snapshot</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">save_table_as_plot</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
                                        <span class="n">df_features</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                                        <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                                        <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                                        <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                        <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                        <span class="n">table</span><span class="o">=</span><span class="n">desc_df</span><span class="p">,</span>
                                        <span class="n">meta_data</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">,</span>
                                        <span class="n">show_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">SnapshotMismatchError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">suppress_runtime_errors</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Descr table raised an error on feature &#39;</span><span class="si">{feature_name}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="s2">{str(e)}&quot;</span><span class="p">,</span>
                    <span class="ne">RuntimeWarning</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">e</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="FeatureAnalysis.group_by_feature_value_count_table"><a class="viewcode-back" href="../../../_autosummary_old/eflow.data_analysis.feature_analysis.html#eflow.data_analysis.feature_analysis.FeatureAnalysis.group_by_feature_value_count_table">[docs]</a>    <span class="k">def</span> <span class="nf">group_by_feature_value_count_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                           <span class="n">df</span><span class="p">,</span>
                                           <span class="n">feature_name</span><span class="p">,</span>
                                           <span class="n">dataset_name</span><span class="p">,</span>
                                           <span class="n">other_feature_name</span><span class="p">,</span>
                                           <span class="n">display_visuals</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                           <span class="n">display_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                           <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                           <span class="n">sub_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                           <span class="n">save_file</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                           <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                           <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Creates/Saves a pandas dataframe of features and their found types</span>
<span class="sd">            in the dataframe.</span>

<span class="sd">            Note</span>
<span class="sd">                Creates a png of the table.</span>

<span class="sd">        Args:</span>
<span class="sd">            df: pd.Dataframe</span>
<span class="sd">                Pandas DataFrame object</span>

<span class="sd">            feature_name: string</span>
<span class="sd">                Specified feature column name.</span>

<span class="sd">            dataset_name: string</span>
<span class="sd">                The dataset&#39;s name; this will create a sub-directory in which your</span>
<span class="sd">                generated graph will be inner-nested in.</span>

<span class="sd">            other_feature_name: string</span>
<span class="sd">                Feature to compare to.</span>

<span class="sd">            display_visuals: bool</span>
<span class="sd">                Boolean value to whether or not to display visualizations.</span>

<span class="sd">            display_print: bool</span>
<span class="sd">                Determines whether or not to print function&#39;s embedded print</span>
<span class="sd">                statements.</span>

<span class="sd">            filename: string</span>
<span class="sd">                If set to &#39;None&#39; will default to a pre-defined string;</span>
<span class="sd">                unless it is set to an actual filename.</span>

<span class="sd">            sub_dir: string</span>
<span class="sd">                Specify the sub directory to append to the pre-defined folder path.</span>

<span class="sd">            save_file: bool</span>
<span class="sd">                Saves file if set to True; doesn&#39;t if set to False.</span>

<span class="sd">            dataframe_snapshot: bool</span>
<span class="sd">                Boolean value to determine whether or not generate and compare a</span>
<span class="sd">                snapshot of the dataframe in the dataset&#39;s directory structure.</span>
<span class="sd">                Helps ensure that data generated in that directory is correctly</span>
<span class="sd">                associated to a dataframe.</span>

<span class="sd">            suppress_runtime_errors: bool</span>
<span class="sd">                If set to true; when generating any graphs will suppress any runtime</span>
<span class="sd">                errors so the program can keep running.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Raises error if the feature data is filled with only nulls or if</span>
<span class="sd">            the json file&#39;s snapshot of the given dataframe doesn&#39;t match the</span>
<span class="sd">            given dataframe.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>

            <span class="c1"># -----</span>
            <span class="n">check_if_feature_exists</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                                    <span class="n">feature_name</span><span class="p">)</span>

            <span class="c1"># Check if dataframe has only null data</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span><span class="s2">&quot;Count plot graph couldn&#39;t be generated because &quot;</span> <span class="o">+</span>
                      <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{feature_name}</span><span class="s2">!&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">other_feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span> <span class="o">==</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">UnsatisfiedRequirments</span><span class="p">(</span><span class="s2">&quot;Count plot graph couldn&#39;t be generated because &quot;</span> <span class="o">+</span>
                      <span class="sa">f</span><span class="s2">&quot;there is only missing data to display in </span><span class="si">{other_feature_name}</span><span class="s2">!&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">display_print</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating group by </span><span class="si">{feature_name}</span><span class="s2"> and </span><span class="si">{other_feature_name}</span><span class="s2"> Table&quot;</span><span class="p">)</span>

            <span class="n">tmp_df</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="n">feature_name</span><span class="p">,</span> <span class="n">other_feature_name</span><span class="p">]])</span>
            <span class="n">tmp_df</span> <span class="o">=</span> <span class="n">tmp_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="n">feature_name</span><span class="p">,</span> <span class="n">other_feature_name</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
            <span class="n">tmp_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Counts&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__notebook_mode</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">display_visuals</span><span class="p">:</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">tmp_df</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">display_visuals</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">tmp_df</span><span class="p">)</span>

            <span class="c1"># Pass a default name if needed</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Group by </span><span class="si">{feature_name}</span><span class="s2"> and </span><span class="si">{other_feature_name}</span><span class="s2"> Table&quot;</span>

            <span class="c1"># Create string sub directory path</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">sub_dir</span><span class="p">:</span>
                <span class="n">sub_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{dataset_name}</span><span class="s2">/</span><span class="si">{feature_name}</span><span class="s2">&quot;</span>

            <span class="n">tmp_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Counts&quot;</span><span class="p">],</span>
                               <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                               <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">save_file</span><span class="p">:</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">:</span>
                    <span class="n">dataframe_snapshot</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">save_table_as_plot</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">tmp_df</span><span class="p">,</span>
                                        <span class="n">df_features</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="p">,</span>
                                        <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                                        <span class="n">sub_dir</span><span class="o">=</span><span class="n">sub_dir</span><span class="p">,</span>
                                        <span class="n">dataframe_snapshot</span><span class="o">=</span><span class="n">dataframe_snapshot</span><span class="p">,</span>
                                        <span class="n">suppress_runtime_errors</span><span class="o">=</span><span class="n">suppress_runtime_errors</span><span class="p">,</span>
                                        <span class="n">table</span><span class="o">=</span><span class="n">tmp_df</span><span class="p">,</span>
                                        <span class="n">show_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                        <span class="n">meta_data</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__called_from_perform</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">SnapshotMismatchError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">suppress_runtime_errors</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Group by table raised an error on feature &#39;</span><span class="si">{feature_name}</span><span class="s2">&#39; by &#39;</span><span class="si">{other_feature_name}</span><span class="s2">&#39;:</span><span class="se">\n</span><span class="s2">{str(e)}&quot;</span><span class="p">,</span>
                    <span class="ne">RuntimeWarning</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">e</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">__get_feature_colors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">df</span><span class="p">,</span>
                             <span class="n">feature_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Creates a dict object of all possible feature values with their</span>
<span class="sd">            associated colors.</span>

<span class="sd">            Note</span>
<span class="sd">                Any unknown feature values that aren&#39;t declared</span>
<span class="sd">                by df_features are given a default color from the constants</span>
<span class="sd">                section of the project. Goes up to 20 different colors unitl</span>
<span class="sd">                colors is init to None.</span>

<span class="sd">        Args:</span>
<span class="sd">            df: pd.Dataframe</span>
<span class="sd">                Pandas DataFrame object</span>

<span class="sd">            feature_name: string</span>
<span class="sd">                Specified feature column name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Gives back a dictionary object of all possible feature values</span>
<span class="sd">            with their associated colors.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">colors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">get_feature_colors</span><span class="p">(</span><span class="n">feature_name</span><span class="p">)</span>
        <span class="n">feature_value_representation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">get_feature_value_representation</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">colors</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">feature_values</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span>
                    <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
                <span class="n">decoder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__df_features</span><span class="o">.</span><span class="n">get_label_decoder</span><span class="p">()</span>

                <span class="c1"># Add color feature value for decoders values</span>
                <span class="k">if</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="n">decoder</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">for</span> <span class="n">cat</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">decoder</span><span class="p">[</span><span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

                        <span class="k">if</span> <span class="n">cat</span> <span class="ow">in</span> <span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="n">hex_code</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">cat</span><span class="p">]</span>
                            <span class="n">colors</span><span class="p">[</span><span class="n">decoder</span><span class="p">[</span><span class="n">feature_name</span><span class="p">][</span><span class="n">cat</span><span class="p">]]</span> <span class="o">=</span> <span class="n">hex_code</span>

                        <span class="k">elif</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="n">hex_code</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">val</span><span class="p">]</span>
                            <span class="n">colors</span><span class="p">[</span><span class="n">cat</span><span class="p">]</span> <span class="o">=</span> <span class="n">hex_code</span>

                <span class="c1"># Add color feature value for different value representation</span>
                <span class="k">if</span> <span class="n">feature_name</span> <span class="ow">in</span> <span class="n">feature_value_representation</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">feature_value_representation</span><span class="p">[</span>
                        <span class="n">feature_name</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="n">hex_code</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">val</span><span class="p">]</span>
                            <span class="n">colors</span><span class="p">[</span><span class="n">feature_value_representation</span><span class="p">[</span>
                                <span class="n">feature_name</span><span class="p">][</span><span class="n">val</span><span class="p">]]</span> <span class="o">=</span> <span class="n">hex_code</span>

                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">feature_values</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">colors</span><span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> \
                        <span class="n">GRAPH_DEFAULTS</span><span class="o">.</span><span class="n">DEFINED_LIST_OF_RANDOM_COLORS</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

                        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span>
                                <span class="n">GRAPH_DEFAULTS</span><span class="o">.</span><span class="n">DEFINED_LIST_OF_RANDOM_COLORS</span><span class="p">):</span>
                            <span class="n">colors</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">colors</span>

    <span class="k">def</span> <span class="nf">__sort_two_lists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">sort_values</span><span class="p">,</span>
                         <span class="n">other_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            Sort&#39;s two collections by the first collection passed in.</span>

<span class="sd">        Args:</span>
<span class="sd">            sort_values: collection</span>
<span class="sd">                Values to be sorted by.</span>
<span class="sd">            other_list: collection</span>
<span class="sd">                Values that get sorted based on &#39;sort_values&#39;.</span>
<span class="sd">        Returns:</span>
<span class="sd">            Returns back those two lists sorted.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">other_list</span><span class="p">,</span> <span class="n">sort_values</span><span class="p">)),</span>
                               <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>

        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">tmp</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">list</span><span class="p">(</span><span class="n">tmp</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Eric Cacciavillani

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>